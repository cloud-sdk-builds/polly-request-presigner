var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};function r(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function c(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((r=r.apply(e,t||[])).next())})}function o(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=c(0),a.throw=c(1),a.return=c(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){i=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){i.label=c[1];break}if(6===c[0]&&i.label<o[1]){i.label=o[1],o=c;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(c);break}o[2]&&i.ops.pop(),i.trys.pop();continue}c=t.call(e,i)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}}function i(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function c(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var u={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},s={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};var l=function(){var e=[],t=[],r=new Set,o=function(r){return e.forEach(function(e){r.add(e.middleware,n({},e))}),t.forEach(function(e){r.addRelativeTo(e.middleware,n({},e))}),r},u=function(e){var t=[];return e.before.forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,c([],a(u(e)),!1))}),t.push(e),e.after.reverse().forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,c([],a(u(e)),!1))}),t},s={add:function(t,o){void 0===o&&(o={});var i=o.name,a=o.override,c=n({step:"initialize",priority:"normal",middleware:t},o);if(i){if(r.has(i)){if(!a)throw new Error("Duplicate middleware name '".concat(i,"'"));var u=e.findIndex(function(e){return e.name===i}),s=e[u];if(s.step!==c.step||s.priority!==c.priority)throw new Error('"'.concat(i,'" middleware with ').concat(s.priority," priority in ").concat(s.step," step cannot be ")+"overridden by same-name middleware with ".concat(c.priority," priority in ").concat(c.step," step."));e.splice(u,1)}r.add(i)}e.push(c)},addRelativeTo:function(e,o){var i=o.name,a=o.override,c=n({middleware:e},o);if(i){if(r.has(i)){if(!a)throw new Error("Duplicate middleware name '".concat(i,"'"));var u=t.findIndex(function(e){return e.name===i}),s=t[u];if(s.toMiddleware!==c.toMiddleware||s.relation!==c.relation)throw new Error('"'.concat(i,'" middleware ').concat(s.relation,' "').concat(s.toMiddleware,'" middleware cannot be overridden ')+"by same-name middleware ".concat(c.relation,' "').concat(c.toMiddleware,'" middleware.'));t.splice(u,1)}r.add(i)}t.push(c)},clone:function(){return o(l())},use:function(e){e.applyToStack(s)},remove:function(n){return"string"==typeof n?function(n){var o=!1,i=function(e){return!e.name||e.name!==n||(o=!0,r.delete(n),!1)};return e=e.filter(i),t=t.filter(i),o}(n):function(n){var o=!1,i=function(e){return e.middleware!==n||(o=!0,e.name&&r.delete(e.name),!1)};return e=e.filter(i),t=t.filter(i),o}(n)},removeByTag:function(n){var o=!1,i=function(e){var t=e.tags,i=e.name;return!t||!t.includes(n)||(i&&r.delete(i),o=!0,!1)};return e=e.filter(i),t=t.filter(i),o},concat:function(e){var t=o(l());return t.use(e),t},applyToStack:o,resolve:function(r,o){var s,l;try{for(var p=i(function(){var r,o=[],i=[],s={};return e.forEach(function(e){var t=n(n({},e),{before:[],after:[]});t.name&&(s[t.name]=t),o.push(t)}),t.forEach(function(e){var t=n(n({},e),{before:[],after:[]});t.name&&(s[t.name]=t),i.push(t)}),i.forEach(function(e){if(e.toMiddleware){var t=s[e.toMiddleware];if(void 0===t)throw new Error("".concat(e.toMiddleware," is not found when adding ").concat(e.name||"anonymous"," middleware ").concat(e.relation," ").concat(e.toMiddleware));"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}),(r=o,r.sort(function(e,t){return f[t.step]-f[e.step]||d[t.priority||"normal"]-d[e.priority||"normal"]})).map(u).reduce(function(e,t){return e.push.apply(e,c([],a(t),!1)),e},[]).map(function(e){return e.middleware})}().reverse()),h=p.next();!h.done;h=p.next())r=(0,h.value)(r,o)}catch(e){s={error:e}}finally{try{h&&!h.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}return r}};return s},f={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},d={high:3,normal:2,low:1},p=(function(){function e(e){this.middlewareStack=l(),this.config=e}e.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,o="function"==typeof t?t:n,i=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!o)return i(e).then(function(e){return e.output});i(e).then(function(e){return o(null,e.output)},function(e){return o(e)}).catch(function(){})},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}(),function(){this.middlewareStack=l()}),h="***SensitiveInformation***",v=(Math.ceil(Math.pow(2,127)*(2-Math.pow(2,-23))),function(e){if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError("Expected integer, got ".concat(typeof e))}}),y=function(e,t){var n=v(e);if(void 0!==n&&g(n,t)!==n)throw new TypeError("Expected ".concat(t,"-bit integer, got ").concat(e));return n},g=function(e,t){switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},m=function(e){if(null!=e){if("string"==typeof e)return e;throw new TypeError("Expected string, got ".concat(typeof e))}},b=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,w=function(e){function n(t){var r=e.call(this,t.message)||this;return Object.setPrototypeOf(r,n.prototype),r.name=t.name,r.$fault=t.$fault,r.$metadata=t.$metadata,r}return t(n,e),n}(Error),S=function(e,t){void 0===t&&(t={}),Object.entries(t).filter(function(e){return void 0!==a(e,2)[1]}).forEach(function(t){var n=a(t,2),r=n[0],o=n[1];null!=e[r]&&""!==e[r]||(e[r]=o)});var n=e.message||e.Message||"UnknownError";return e.message=n,delete e.Message,e},x=function(){var e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,c([null],a(arguments),!1)));return Object.setPrototypeOf(t,e.prototype),t};x.prototype=Object.create(String.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(x,String),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),n.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},n.prototype.toJSON=function(){return e.prototype.toString.call(this)},n.fromObject=function(e){return e instanceof n?e:new n(e instanceof String||"string"==typeof e?e:JSON.stringify(e))}}(x);var E,O,L=function(e){function n(t){var r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return t(n,e),n}(w);!function(e){e.filterSensitiveLog=function(e){return n({},e)}}(E||(E={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(O||(O={}));var j,P,T,$,k,I=function(e){function r(t){var o=e.call(this,n({name:"LexiconNotFoundException",$fault:"client"},t))||this;return o.name="LexiconNotFoundException",o.$fault="client",Object.setPrototypeOf(o,r.prototype),o}return t(r,e),r}(L),A=function(e){function r(t){var o=e.call(this,n({name:"ServiceFailureException",$fault:"server"},t))||this;return o.name="ServiceFailureException",o.$fault="server",Object.setPrototypeOf(o,r.prototype),o}return t(r,e),r}(L);!function(e){e.NEURAL="neural",e.STANDARD="standard"}(j||(j={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(P||(P={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(T||(T={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}($||($={})),t(function e(t){var r=k.call(this,n({name:"InvalidNextTokenException",$fault:"client"},t))||this;return r.name="InvalidNextTokenException",r.$fault="client",Object.setPrototypeOf(r,e.prototype),r},k=L);var C,N,z,q,M,R,D,F,H,_,U,K=function(e){function r(t){var o=e.call(this,n({name:"EngineNotSupportedException",$fault:"client"},t))||this;return o.name="EngineNotSupportedException",o.$fault="client",Object.setPrototypeOf(o,r.prototype),o}return t(r,e),r}(L);!function(e){e.filterSensitiveLog=function(e){return n({},e)}}(C||(C={})),function(e){e.filterSensitiveLog=function(e){return n(n({},e),e.Content&&{Content:h})}}(N||(N={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(z||(z={})),function(e){e.filterSensitiveLog=function(e){return n(n({},e),e.Lexicon&&{Lexicon:N.filterSensitiveLog(e.Lexicon)})}}(q||(q={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(M||(M={})),function(e){e.JSON="json",e.MP3="mp3",e.OGG_VORBIS="ogg_vorbis",e.PCM="pcm"}(R||(R={})),function(e){e.SENTENCE="sentence",e.SSML="ssml",e.VISEME="viseme",e.WORD="word"}(D||(D={})),function(e){e.COMPLETED="completed",e.FAILED="failed",e.IN_PROGRESS="inProgress",e.SCHEDULED="scheduled"}(F||(F={})),function(e){e.SSML="ssml",e.TEXT="text"}(H||(H={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(_||(_={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(U||(U={})),function(e){t(function t(r){var o=e.call(this,n({name:"InvalidTaskIdException",$fault:"client"},r))||this;return o.name="InvalidTaskIdException",o.$fault="client",Object.setPrototypeOf(o,t.prototype),o},e)}(L),function(e){t(function t(r){var o=e.call(this,n({name:"SynthesisTaskNotFoundException",$fault:"client"},r))||this;return o.name="SynthesisTaskNotFoundException",o.$fault="client",Object.setPrototypeOf(o,t.prototype),o},e)}(L),function(e){t(function t(r){var o=e.call(this,n({name:"InvalidLexiconException",$fault:"client"},r))||this;return o.name="InvalidLexiconException",o.$fault="client",Object.setPrototypeOf(o,t.prototype),o},e)}(L),function(e){t(function t(r){var o=e.call(this,n({name:"InvalidS3BucketException",$fault:"client"},r))||this;return o.name="InvalidS3BucketException",o.$fault="client",Object.setPrototypeOf(o,t.prototype),o},e)}(L),function(e){t(function t(r){var o=e.call(this,n({name:"InvalidS3KeyException",$fault:"client"},r))||this;return o.name="InvalidS3KeyException",o.$fault="client",Object.setPrototypeOf(o,t.prototype),o},e)}(L);var B,X,G,J,W,V=function(e){function r(t){var o=e.call(this,n({name:"InvalidSampleRateException",$fault:"client"},t))||this;return o.name="InvalidSampleRateException",o.$fault="client",Object.setPrototypeOf(o,r.prototype),o}return t(r,e),r}(L),Z=(function(e){t(function t(r){var o=e.call(this,n({name:"InvalidSnsTopicArnException",$fault:"client"},r))||this;return o.name="InvalidSnsTopicArnException",o.$fault="client",Object.setPrototypeOf(o,t.prototype),o},e)}(L),function(e){function r(t){var o=e.call(this,n({name:"InvalidSsmlException",$fault:"client"},t))||this;return o.name="InvalidSsmlException",o.$fault="client",Object.setPrototypeOf(o,r.prototype),o}return t(r,e),r}(L)),Y=function(e){function r(t){var o=e.call(this,n({name:"LanguageNotSupportedException",$fault:"client"},t))||this;return o.name="LanguageNotSupportedException",o.$fault="client",Object.setPrototypeOf(o,r.prototype),o}return t(r,e),r}(L);!function(e){e.filterSensitiveLog=function(e){return n({},e)}}(B||(B={})),function(e){t(function t(r){var o=e.call(this,n({name:"LexiconSizeExceededException",$fault:"client"},r))||this;return o.name="LexiconSizeExceededException",o.$fault="client",Object.setPrototypeOf(o,t.prototype),o},e)}(L),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(X||(X={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(G||(G={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(J||(J={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(W||(W={}));var Q,ee,te=function(e){function r(t){var o=e.call(this,n({name:"MarksNotSupportedForFormatException",$fault:"client"},t))||this;return o.name="MarksNotSupportedForFormatException",o.$fault="client",Object.setPrototypeOf(o,r.prototype),o}return t(r,e),r}(L);(function(e){t(function t(r){var o=e.call(this,n({name:"MaxLexemeLengthExceededException",$fault:"client"},r))||this;return o.name="MaxLexemeLengthExceededException",o.$fault="client",Object.setPrototypeOf(o,t.prototype),o},e)})(L),function(e){t(function t(r){var o=e.call(this,n({name:"MaxLexiconsNumberExceededException",$fault:"client"},r))||this;return o.name="MaxLexiconsNumberExceededException",o.$fault="client",Object.setPrototypeOf(o,t.prototype),o},e)}(L),function(e){e.filterSensitiveLog=function(e){return n(n({},e),e.Content&&{Content:h})}}(Q||(Q={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(ee||(ee={})),function(e){t(function t(r){var o=e.call(this,n({name:"UnsupportedPlsAlphabetException",$fault:"client"},r))||this;return o.name="UnsupportedPlsAlphabetException",o.$fault="client",Object.setPrototypeOf(o,t.prototype),o},e)}(L),function(e){t(function t(r){var o=e.call(this,n({name:"UnsupportedPlsLanguageException",$fault:"client"},r))||this;return o.name="UnsupportedPlsLanguageException",o.$fault="client",Object.setPrototypeOf(o,t.prototype),o},e)}(L);var ne,re,oe=function(e){function r(t){var o=e.call(this,n({name:"SsmlMarksNotSupportedForTextTypeException",$fault:"client"},t))||this;return o.name="SsmlMarksNotSupportedForTextTypeException",o.$fault="client",Object.setPrototypeOf(o,r.prototype),o}return t(r,e),r}(L);!function(e){e.filterSensitiveLog=function(e){return n({},e)}}(ne||(ne={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(re||(re={}));var ie,ae,ce=function(e){function r(t){var o=e.call(this,n({name:"TextLengthExceededException",$fault:"client"},t))||this;return o.name="TextLengthExceededException",o.$fault="client",Object.setPrototypeOf(o,r.prototype),o}return t(r,e),r}(L);!function(e){e.filterSensitiveLog=function(e){return n({},e)}}(ie||(ie={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(ae||(ae={}));for(var ue=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?"".concat(e.protocol,":"):e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/".concat(e.path):e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,r=new e(n(n({},this),{headers:n({},this.headers)}));return r.query&&(r.query=(t=r.query,Object.keys(t).reduce(function(e,r){var o,i=t[r];return n(n({},e),((o={})[r]=Array.isArray(i)?c([],a(i),!1):i,o))},{}))),r},e}(),se=function(e,t){return r(void 0,void 0,void 0,function(){var n,r;return o(this,function(o){return 200!==e.statusCode&&e.statusCode>=300?[2,le(e,t)]:(n={$metadata:xe(e),AudioStream:void 0,ContentType:void 0,RequestCharacters:void 0},void 0!==e.headers["content-type"]&&(n.ContentType=e.headers["content-type"]),void 0!==e.headers["x-amzn-requestcharacters"]&&(n.RequestCharacters=function(e){return y(e,32)}("string"==typeof(i=e.headers["x-amzn-requestcharacters"])?function(e){var t=e.match(b);if(null===t||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)}(i):i)),r=e.body,n.AudioStream=r,[2,Promise.resolve(n)]);var i})})},le=function(e,t){return r(void 0,void 0,void 0,function(){var r,i,a,c,u,s,l,f;return o(this,function(o){switch(o.label){case 0:return i=[n({},e)],f={},[4,Ee(e.body,t)];case 1:switch(r=n.apply(void 0,i.concat([(f.body=o.sent(),f)])),c=Oe(e,r.body)){case"EngineNotSupportedException":case"com.amazonaws.polly#EngineNotSupportedException":return[3,2];case"InvalidSampleRateException":case"com.amazonaws.polly#InvalidSampleRateException":return[3,4];case"InvalidSsmlException":case"com.amazonaws.polly#InvalidSsmlException":return[3,6];case"LanguageNotSupportedException":case"com.amazonaws.polly#LanguageNotSupportedException":return[3,8];case"LexiconNotFoundException":case"com.amazonaws.polly#LexiconNotFoundException":return[3,10];case"MarksNotSupportedForFormatException":case"com.amazonaws.polly#MarksNotSupportedForFormatException":return[3,12];case"ServiceFailureException":case"com.amazonaws.polly#ServiceFailureException":return[3,14];case"SsmlMarksNotSupportedForTextTypeException":case"com.amazonaws.polly#SsmlMarksNotSupportedForTextTypeException":return[3,16];case"TextLengthExceededException":case"com.amazonaws.polly#TextLengthExceededException":return[3,18]}return[3,20];case 2:return[4,fe(r,t)];case 3:case 5:case 7:case 9:case 11:case 13:case 15:case 17:case 19:throw o.sent();case 4:return[4,de(r,t)];case 6:return[4,pe(r,t)];case 8:return[4,he(r,t)];case 10:return[4,ve(r,t)];case 12:return[4,ye(r,t)];case 14:return[4,ge(r,t)];case 16:return[4,me(r,t)];case 18:return[4,be(r,t)];case 20:throw u=r.body,s=xe(e),l=s.httpStatusCode?s.httpStatusCode+"":void 0,a=new L({name:u.code||u.Code||c||l||"UnknowError",$fault:"client",$metadata:s}),S(a,u)}})})},fe=function(e,t){return r(void 0,void 0,void 0,function(){var t,r,i;return o(this,function(o){return t={},void 0!==(r=e.body).message&&null!==r.message&&(t.message=m(r.message)),i=new K(n({$metadata:xe(e)},t)),[2,S(i,e.body)]})})},de=function(e,t){return r(void 0,void 0,void 0,function(){var t,r,i;return o(this,function(o){return t={},void 0!==(r=e.body).message&&null!==r.message&&(t.message=m(r.message)),i=new V(n({$metadata:xe(e)},t)),[2,S(i,e.body)]})})},pe=function(e,t){return r(void 0,void 0,void 0,function(){var t,r,i;return o(this,function(o){return t={},void 0!==(r=e.body).message&&null!==r.message&&(t.message=m(r.message)),i=new Z(n({$metadata:xe(e)},t)),[2,S(i,e.body)]})})},he=function(e,t){return r(void 0,void 0,void 0,function(){var t,r,i;return o(this,function(o){return t={},void 0!==(r=e.body).message&&null!==r.message&&(t.message=m(r.message)),i=new Y(n({$metadata:xe(e)},t)),[2,S(i,e.body)]})})},ve=function(e,t){return r(void 0,void 0,void 0,function(){var t,r,i;return o(this,function(o){return t={},void 0!==(r=e.body).message&&null!==r.message&&(t.message=m(r.message)),i=new I(n({$metadata:xe(e)},t)),[2,S(i,e.body)]})})},ye=function(e,t){return r(void 0,void 0,void 0,function(){var t,r,i;return o(this,function(o){return t={},void 0!==(r=e.body).message&&null!==r.message&&(t.message=m(r.message)),i=new te(n({$metadata:xe(e)},t)),[2,S(i,e.body)]})})},ge=function(e,t){return r(void 0,void 0,void 0,function(){var t,r,i;return o(this,function(o){return t={},void 0!==(r=e.body).message&&null!==r.message&&(t.message=m(r.message)),i=new A(n({$metadata:xe(e)},t)),[2,S(i,e.body)]})})},me=function(e,t){return r(void 0,void 0,void 0,function(){var t,r,i;return o(this,function(o){return t={},void 0!==(r=e.body).message&&null!==r.message&&(t.message=m(r.message)),i=new oe(n({$metadata:xe(e)},t)),[2,S(i,e.body)]})})},be=function(e,t){return r(void 0,void 0,void 0,function(){var t,r,i;return o(this,function(o){return t={},void 0!==(r=e.body).message&&null!==r.message&&(t.message=m(r.message)),i=new ce(n({$metadata:xe(e)},t)),[2,S(i,e.body)]})})},we=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},Se=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},xe=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Ee=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then(function(e){return t.utf8Encoder(e)})}(e,t).then(function(e){return e.length?JSON.parse(e):{}})},Oe=function(e,t){var n,r=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},o=(n=e.headers,Object.keys(n).find(function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==o?r(e.headers[o]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):void 0},Le=function(e){function i(t){var n=e.call(this)||this;return n.input=t,n}return t(i,e),i.prototype.resolveMiddleware=function(e,t,i){var a,c,l;this.middlewareStack.use((a=t,c=this.serialize,l=this.deserialize,{applyToStack:function(e){e.add(function(e,t){return function(n,i){return function(i){return r(void 0,void 0,void 0,function(){var r,a,c;return o(this,function(o){switch(o.label){case 0:return[4,n(i)];case 1:r=o.sent().response,o.label=2;case 2:return o.trys.push([2,4,,5]),[4,t(r,e)];case 3:return a=o.sent(),[2,{response:r,output:a}];case 4:throw c=o.sent(),Object.defineProperty(c,"$response",{value:r}),c;case 5:return[2]}})})}}}(a,l),u),e.add(function(e,t){return function(i,a){return function(a){return r(void 0,void 0,void 0,function(){var r;return o(this,function(o){switch(o.label){case 0:return[4,t(a.input,e)];case 1:return r=o.sent(),[2,i(n(n({},a),{request:r}))]}})})}}}(a,c),s)}}));var f=e.concat(this.middlewareStack),d={logger:t.logger,clientName:"PollyClient",commandName:"SynthesizeSpeechCommand",inputFilterSensitiveLog:ie.filterSensitiveLog,outputFilterSensitiveLog:ae.filterSensitiveLog},p=t.requestHandler;return f.resolve(function(e){return p.handle(e.request,i||{})},d)},i.prototype.serialize=function(e,t){return function(e,t){return r(void 0,void 0,void 0,function(){var r,i,a,c,u,s,l,f,d;return o(this,function(o){switch(o.label){case 0:return[4,t.endpoint()];case 1:return r=o.sent(),i=r.hostname,a=r.protocol,c=void 0===a?"https":a,u=r.port,s=r.path,l={"content-type":"application/json"},f="".concat((null==s?void 0:s.endsWith("/"))?s.slice(0,-1):s||"")+"/v1/speech",d=JSON.stringify(n(n(n(n(n(n(n(n(n({},null!=e.Engine&&{Engine:e.Engine}),null!=e.LanguageCode&&{LanguageCode:e.LanguageCode}),null!=e.LexiconNames&&{LexiconNames:we(e.LexiconNames)}),null!=e.OutputFormat&&{OutputFormat:e.OutputFormat}),null!=e.SampleRate&&{SampleRate:e.SampleRate}),null!=e.SpeechMarkTypes&&{SpeechMarkTypes:Se(e.SpeechMarkTypes)}),null!=e.Text&&{Text:e.Text}),null!=e.TextType&&{TextType:e.TextType}),null!=e.VoiceId&&{VoiceId:e.VoiceId})),[2,new ue({protocol:c,hostname:i,port:u,method:"POST",headers:l,path:f,body:d})]}})})}(e,t)},i.prototype.deserialize=function(e,t){return se(e,t)},i}(p),je={},Pe={},Te=0;Te<256;Te++){var $e=Te.toString(16).toLowerCase();1===$e.length&&($e="0".concat($e)),je[Te]=$e,Pe[$e]=Te}function ke(e){for(var t="",n=0;n<e.byteLength;n++)t+=je[e[n]];return t}var Ie=function(e){if("function"==typeof e)return e;var t=Promise.resolve(e);return function(){return t}},Ae="X-Amz-Date",Ce="X-Amz-Signature",Ne="X-Amz-Security-Token",ze="authorization",qe=Ae.toLowerCase(),Me=[ze,qe,"date"],Re=Ce.toLowerCase(),De="x-amz-content-sha256",Fe=Ne.toLowerCase(),He={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},_e=/^proxy-/,Ue=/^sec-/,Ke="AWS4-HMAC-SHA256",Be="AWS4-HMAC-SHA256-PAYLOAD",Xe="aws4_request",Ge={},Je=[],We=function(e,t,n){return"".concat(e,"/").concat(t,"/").concat(n,"/").concat(Xe)},Ve=function(e,t,n){var r=new e(t);return r.update(n),r.digest()},Ze=function(e,t,n){var r,o,a=e.headers,c={};try{for(var u=i(Object.keys(a).sort()),s=u.next();!s.done;s=u.next()){var l=s.value,f=l.toLowerCase();(f in He||(null==t?void 0:t.has(f))||_e.test(f)||Ue.test(f))&&(!n||n&&!n.has(f))||(c[f]=a[l].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{s&&!s.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}return c},Ye=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,Qe)},Qe=function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())},et=function(e,t){var n=e.headers,a=e.body;return r(void 0,void 0,void 0,function(){var e,r,c,u,s,l,f;return o(this,function(o){switch(o.label){case 0:try{for(e=i(Object.keys(n)),r=e.next();!r.done;r=e.next())if((c=r.value).toLowerCase()===De)return[2,n[c]]}catch(e){l={error:e}}finally{try{r&&!r.done&&(f=e.return)&&f.call(e)}finally{if(l)throw l.error}}return null!=a?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof a||ArrayBuffer.isView(a)||(d=a,"function"==typeof ArrayBuffer&&d instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(d))?((u=new t).update(a),s=ke,[4,u.digest()]):[3,3];case 2:return[2,s.apply(void 0,[o.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var d})})},tt=function(e){var t=e.headers,r=e.query,o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["headers","query"]);return n(n({},o),{headers:n({},t),query:r?nt(r):void 0})},nt=function(e){return Object.keys(e).reduce(function(t,r){var o,i=e[r];return n(n({},t),((o={})[r]=Array.isArray(i)?c([],a(i),!1):i,o))},{})},rt=function(e){var t,n;e="function"==typeof e.clone?e.clone():tt(e);try{for(var r=i(Object.keys(e.headers)),o=r.next();!o.done;o=r.next()){var a=o.value;Me.indexOf(a.toLowerCase())>-1&&delete e.headers[a]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e},ot=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,o=e.service,i=e.sha256,a=e.uriEscapePath,c=void 0===a||a;this.service=o,this.sha256=i,this.uriEscapePath=c,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=Ie(r),this.credentialProvider=Ie(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),r(this,void 0,void 0,function(){var r,a,c,u,s,l,f,d,p,h,v,y,g,m,b,w,S,x,E,O,L,j,P,T;return o(this,function(o){switch(o.label){case 0:return r=t.signingDate,a=void 0===r?new Date:r,c=t.expiresIn,u=void 0===c?3600:c,s=t.unsignableHeaders,l=t.unhoistableHeaders,f=t.signableHeaders,d=t.signingRegion,p=t.signingService,[4,this.credentialProvider()];case 1:return h=o.sent(),null==d?[3,2]:(y=d,[3,4]);case 2:return[4,this.regionProvider()];case 3:y=o.sent(),o.label=4;case 4:return v=y,g=it(a),m=g.longDate,b=g.shortDate,u>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(w=We(b,v,null!=p?p:this.service),S=function(e,t){var r,o,a;void 0===t&&(t={});var c="function"==typeof e.clone?e.clone():tt(e),u=c.headers,s=c.query,l=void 0===s?{}:s;try{for(var f=i(Object.keys(u)),d=f.next();!d.done;d=f.next()){var p=d.value,h=p.toLowerCase();"x-amz-"!==h.slice(0,6)||(null===(a=t.unhoistableHeaders)||void 0===a?void 0:a.has(h))||(l[p]=u[p],delete u[p])}}catch(e){r={error:e}}finally{try{d&&!d.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}return n(n({},e),{headers:u,query:l})}(rt(e),{unhoistableHeaders:l}),h.sessionToken&&(S.query[Ne]=h.sessionToken),S.query["X-Amz-Algorithm"]=Ke,S.query["X-Amz-Credential"]="".concat(h.accessKeyId,"/").concat(w),S.query[Ae]=m,S.query["X-Amz-Expires"]=u.toString(10),x=Ze(S,s,f),S.query["X-Amz-SignedHeaders"]=at(x),E=S.query,O=Ce,L=this.getSignature,j=[m,w,this.getSigningKey(h,v,b,p)],P=this.createCanonicalRequest,T=[S,x],[4,et(e,this.sha256)]);case 5:return[4,L.apply(this,j.concat([P.apply(this,T.concat([o.sent()]))]))];case 6:return E[O]=o.sent(),[2,S]}})})},e.prototype.sign=function(e,t){return r(this,void 0,void 0,function(){return o(this,function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]})})},e.prototype.signEvent=function(e,t){var n=e.headers,i=e.payload,a=t.signingDate,c=void 0===a?new Date:a,u=t.priorSignature,s=t.signingRegion,l=t.signingService;return r(this,void 0,void 0,function(){var e,t,r,a,f,d,p,h,v,y,g;return o(this,function(o){switch(o.label){case 0:return null==s?[3,1]:(t=s,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=o.sent(),o.label=3;case 3:return e=t,r=it(c),a=r.shortDate,f=r.longDate,d=We(a,e,null!=l?l:this.service),[4,et({headers:{},body:i},this.sha256)];case 4:return p=o.sent(),(h=new this.sha256).update(n),y=ke,[4,h.digest()];case 5:return v=y.apply(void 0,[o.sent()]),g=[Be,f,d,u,v,p].join("\n"),[2,this.signString(g,{signingDate:c,signingRegion:e,signingService:l})]}})})},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,i=n.signingDate,a=void 0===i?new Date:i,c=n.signingRegion,u=n.signingService;return r(this,void 0,void 0,function(){var t,n,r,i,s,l,f,d;return o(this,function(o){switch(o.label){case 0:return[4,this.credentialProvider()];case 1:return t=o.sent(),null==c?[3,2]:(r=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=o.sent(),o.label=4;case 4:return n=r,i=it(a).shortDate,f=(l=this.sha256).bind,[4,this.getSigningKey(t,n,i,u)];case 5:return(s=new(f.apply(l,[void 0,o.sent()]))).update(e),d=ke,[4,s.digest()];case 6:return[2,d.apply(void 0,[o.sent()])]}})})},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,a=n.signingDate,c=void 0===a?new Date:a,u=n.signableHeaders,s=n.unsignableHeaders,l=n.signingRegion,f=n.signingService;return r(this,void 0,void 0,function(){var t,n,r,a,d,p,h,v,y,g,m;return o(this,function(o){switch(o.label){case 0:return[4,this.credentialProvider()];case 1:return t=o.sent(),null==l?[3,2]:(r=l,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=o.sent(),o.label=4;case 4:return n=r,a=rt(e),d=it(c),p=d.longDate,h=d.shortDate,v=We(h,n,null!=f?f:this.service),a.headers[qe]=p,t.sessionToken&&(a.headers[Fe]=t.sessionToken),[4,et(a,this.sha256)];case 5:return y=o.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var o=i(Object.keys(t)),a=o.next();!a.done;a=o.next())if(e===a.value.toLowerCase())return!0}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!1}(De,a.headers)&&this.applyChecksum&&(a.headers[De]=y),g=Ze(a,s,u),[4,this.getSignature(p,v,this.getSigningKey(t,n,h,f),this.createCanonicalRequest(a,g,y))];case 6:return m=o.sent(),a.headers[ze]="".concat(Ke," ")+"Credential=".concat(t.accessKeyId,"/").concat(v,", ")+"SignedHeaders=".concat(at(g),", ")+"Signature=".concat(m),[2,a]}})})},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return"".concat(e.method,"\n").concat(this.getCanonicalPath(e),"\n").concat(function(e){var t,n,r=e.query,o=void 0===r?{}:r,a=[],c={},u=function(e){if(e.toLowerCase()===Re)return"continue";a.push(e);var t=o[e];"string"==typeof t?c[e]="".concat(Ye(e),"=").concat(Ye(t)):Array.isArray(t)&&(c[e]=t.slice(0).sort().reduce(function(t,n){return t.concat(["".concat(Ye(e),"=").concat(Ye(n))])},[]).join("&"))};try{for(var s=i(Object.keys(o).sort()),l=s.next();!l.done;l=s.next())u(l.value)}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return a.map(function(e){return c[e]}).filter(function(e){return e}).join("&")}(e),"\n").concat(r.map(function(e){return"".concat(e,":").concat(t[e])}).join("\n"),"\n\n").concat(r.join(";"),"\n").concat(n)},e.prototype.createStringToSign=function(e,t,n){return r(this,void 0,void 0,function(){var r,i;return o(this,function(o){switch(o.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return i=o.sent(),[2,"".concat(Ke,"\n").concat(e,"\n").concat(t,"\n").concat(ke(i))]}})})},e.prototype.getCanonicalPath=function(e){var t,n,r=e.path;if(this.uriEscapePath){var o=[];try{for(var a=i(r.split("/")),c=a.next();!c.done;c=a.next()){var u=c.value;0!==(null==u?void 0:u.length)&&"."!==u&&(".."===u?o.pop():o.push(u))}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}var s="".concat((null==r?void 0:r.startsWith("/"))?"/":"").concat(o.join("/")).concat(o.length>0&&(null==r?void 0:r.endsWith("/"))?"/":"");return encodeURIComponent(s).replace(/%2F/g,"/")}return r},e.prototype.getSignature=function(e,t,n,i){return r(this,void 0,void 0,function(){var r,a,c,u,s;return o(this,function(o){switch(o.label){case 0:return[4,this.createStringToSign(e,t,i)];case 1:return r=o.sent(),u=(c=this.sha256).bind,[4,n];case 2:return(a=new(u.apply(c,[void 0,o.sent()]))).update(r),s=ke,[4,a.digest()];case 3:return[2,s.apply(void 0,[o.sent()])]}})})},e.prototype.getSigningKey=function(e,t,n,a){return function(e,t,n,a,c){return r(void 0,void 0,void 0,function(){var r,u,s,l,f,d,p,h,v;return o(this,function(o){switch(o.label){case 0:return[4,Ve(e,t.secretAccessKey,t.accessKeyId)];case 1:if(r=o.sent(),(u="".concat(n,":").concat(a,":").concat(c,":").concat(ke(r),":").concat(t.sessionToken))in Ge)return[2,Ge[u]];for(Je.push(u);Je.length>50;)delete Ge[Je.shift()];s="AWS4".concat(t.secretAccessKey),o.label=2;case 2:o.trys.push([2,7,8,9]),l=i([n,a,c,Xe]),f=l.next(),o.label=3;case 3:return f.done?[3,6]:(d=f.value,[4,Ve(e,s,d)]);case 4:s=o.sent(),o.label=5;case 5:return f=l.next(),[3,3];case 6:return[3,9];case 7:return p=o.sent(),h={error:p},[3,9];case 8:try{f&&!f.done&&(v=l.return)&&v.call(l)}finally{if(h)throw h.error}return[7];case 9:return[2,Ge[u]=s]}})})}(this.sha256,e,n,t,a||this.service)},e}(),it=function(e){var t,n=(t=e,function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(t).toISOString().replace(/\.\d{3}Z$/,"Z")).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.slice(0,8)}},at=function(e){return Object.keys(e).sort().join(";")};function ct(e){var t=e.port,n=e.query,r=e.protocol,o=e.path,a=e.hostname;r&&":"!==r.slice(-1)&&(r+=":"),t&&(a+=":".concat(t)),o&&"/"!==o.charAt(0)&&(o="/".concat(o));var c=n?function(e){var t,n,r=[];try{for(var o=i(Object.keys(e).sort()),a=o.next();!a.done;a=o.next()){var c=a.value,u=e[c];if(c=Ye(c),Array.isArray(u))for(var s=0,l=u.length;s<l;s++)r.push("".concat(c,"=").concat(Ye(u[s])));else{var f=c;(u||"string"==typeof u)&&(f+="=".concat(Ye(u))),r.push(f)}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r.join("&")}(n):"";return c&&"?"!==c[0]&&(c="?".concat(c)),"".concat(r,"//").concat(a).concat(o).concat(c)}var ut=function(e,t,i){return void 0===i&&(i={}),r(void 0,void 0,void 0,function(){var a,c,u,s;return o(this,function(l){switch(l.label){case 0:a=new ot(n({service:i.service||"polly",uriEscapePath:i.uriEscapePath||!1},e.config)),c=function(e,t){return function(e){return r(void 0,void 0,void 0,function(){var r,c,u,s;return o(this,function(o){switch(o.label){case 0:if(r=e.request,!ue.isInstance(r))throw new Error("Request to be presigned is not an valid HTTP request.");return r.method="GET",delete r.headers["amz-sdk-invocation-id"],delete r.headers["amz-sdk-request"],delete r.headers["content-length"],r.body="",r.query=n(n({},r.query),e.input),(c=new Set).add("content-type"),[4,a.presign(r,n(n({expiresIn:3600,unsignableHeaders:c},i),{signingRegion:null!==(u=i.signingRegion)&&void 0!==u?u:t.signing_region,signingService:null!==(s=i.signingService)&&void 0!==s?s:t.signing_service}))];case 1:return[2,{response:{},output:{$metadata:{httpStatusCode:200},presigned:o.sent()}}]}})})}},e.middlewareStack.addRelativeTo(c,{name:"presignInterceptMiddleware",relation:"before",toMiddleware:"awsAuthMiddleware"}),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,e.send(t)];case 2:return s=l.sent(),u=s.presigned,[3,4];case 3:return e.middlewareStack.remove("presignInterceptMiddleware"),[7];case 4:return[2,ct(u)]}})})},st=function(e){return r(void 0,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return t=new Le(e.params),n=e.options||{},[4,ut(e.client,t,n)];case 1:return[2,r.sent()]}})})};export{st as getSynthesizeSpeechUrl};