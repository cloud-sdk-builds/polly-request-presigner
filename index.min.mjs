const e="__smithy_context",t=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,r=/(\d+\.){3}\d+/,n=/\.\./,s=(e,t,r,n=!1)=>{const s=async()=>{let s;if(n){const n=r.clientContextParams,i=n?.[e];s=i??r[e]??r[t]}else s=r[e]??r[t];return"function"==typeof s?s():s};return"credentialScope"===e||"CredentialScope"===t?async()=>{const e="function"==typeof r.credentials?await r.credentials():r.credentials;return e?.credentialScope??e?.CredentialScope}:"accountId"===e||"AccountId"===t?async()=>{const e="function"==typeof r.credentials?await r.credentials():r.credentials;return e?.accountId??e?.AccountId}:"endpoint"===e||"endpoint"===t?async()=>{if(!1===r.isCustomEndpoint)return;const e=await s();if(e&&"object"==typeof e){if("url"in e)return e.url.href;if("hostname"in e){const{protocol:t,hostname:r,port:n,path:s}=e;return`${t}//${r}${n?":"+n:""}${s}`}}return e}:s},i=e=>{if("string"==typeof e)return i(new URL(e));const{hostname:t,pathname:r,port:n,protocol:s,search:o}=e;let a;return o&&(a=function(e){const t={};if(e=e.replace(/^\?/,""))for(const r of e.split("&")){let[e,n=null]=r.split("=");e=decodeURIComponent(e),n&&(n=decodeURIComponent(n)),e in t?Array.isArray(t[e])?t[e].push(n):t[e]=[t[e],n]:t[e]=n}return t}(o)),{hostname:t,port:n?parseInt(n):void 0,protocol:s,path:r,query:a}},o=async(e,i,o)=>{const a={},c=i?.getEndpointParameterInstructions?.()||{};for(const[t,r]of Object.entries(c))switch(r.type){case"staticContextParams":a[t]=r.value;break;case"contextParams":a[t]=e[r.name];break;case"clientContextParams":case"builtInParams":a[t]=await s(r.name,t,o,"builtInParams"!==r.type)();break;case"operationContextParams":a[t]=r.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(r))}return 0===Object.keys(c).length&&Object.assign(a,o),"s3"===String(o.serviceId).toLowerCase()&&await(async e=>{const s=e?.Bucket||"";if("string"==typeof e.Bucket&&(e.Bucket=s.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),(e=>{const[t,r,n,,,s]=e.split(":"),i="arn"===t&&e.split(":").length>=6,o=Boolean(i&&r&&n&&s);if(i&&!o)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return o})(s)){if(!0===e.ForcePathStyle)throw new Error("Path-style addressing cannot be used with ARN buckets")}else i=s,(!t.test(i)||r.test(i)||n.test(i)||-1!==s.indexOf(".")&&!String(e.Endpoint).startsWith("http:")||s.toLowerCase()!==s||s.length<3)&&(e.ForcePathStyle=!0);var i;return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e})(a),a},a=({config:t,instructions:r})=>(n,s)=>async a=>{t.isCustomEndpoint&&function(e){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features.ENDPOINT_OVERRIDE="N"}(s);const c=await(async(e,t,r,n)=>{if(!r.isCustomEndpoint){let e;e=r.serviceConfiguredEndpoint?await r.serviceConfiguredEndpoint():await(async()=>{})(r.serviceId),e&&(r.endpoint=()=>{return Promise.resolve("object"==typeof(t=e)?"url"in t?i(t.url):t:i(t));var t},r.isCustomEndpoint=!0)}const s=await o(e,t,r);if("function"!=typeof r.endpointProvider)throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)})(a.input,{getEndpointParameterInstructions:()=>r},{...t},s);s.endpointV2=c,s.authSchemes=c.properties?.authSchemes;const l=s.authSchemes?.[0];if(l){s.signing_region=l.signingRegion,s.signing_service=l.signingName;const t=(t=>t[e]||(t[e]={}))(s),r=t?.selectedHttpAuthScheme?.httpAuthOption;r&&(r.signingProperties=Object.assign(r.signingProperties||{},{signing_region:l.signingRegion,signingRegion:l.signingRegion,signing_service:l.signingName,signingName:l.signingName,signingRegionSet:l.signingRegionSet},l.properties))}return n({...a})},c={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:"serializerMiddleware"},l=(e,t)=>({applyToStack:r=>{r.addRelativeTo(a({config:e,instructions:t}),c)}}),u=(e,t)=>{const r=[];if(e&&r.push(e),t)for(const e of t)r.push(e);return r},h=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,p=()=>{let e=[],t=[],r=!1;const n=new Set,s=r=>(e.forEach(e=>{r.add(e.middleware,{...e})}),t.forEach(e=>{r.addRelativeTo(e.middleware,{...e})}),r.identifyOnResolve?.(a.identifyOnResolve()),r),i=e=>{const t=[];return e.before.forEach(e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...i(e))}),t.push(e),e.after.reverse().forEach(e=>{0===e.before.length&&0===e.after.length?t.push(e):t.push(...i(e))}),t},o=(r=!1)=>{const n=[],s=[],o={};var a;return e.forEach(e=>{const t={...e,before:[],after:[]};for(const e of u(t.name,t.aliases))o[e]=t;n.push(t)}),t.forEach(e=>{const t={...e,before:[],after:[]};for(const e of u(t.name,t.aliases))o[e]=t;s.push(t)}),s.forEach(e=>{if(e.toMiddleware){const t=o[e.toMiddleware];if(void 0===t){if(r)return;throw new Error(`${e.toMiddleware} is not found when adding ${h(e.name,e.aliases)} middleware ${e.relation} ${e.toMiddleware}`)}"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}),(a=n,a.sort((e,t)=>d[t.step]-d[e.step]||m[t.priority||"normal"]-m[e.priority||"normal"])).map(i).reduce((e,t)=>(e.push(...t),e),[])},a={add:(t,r={})=>{const{name:s,override:i,aliases:o}=r,a={step:"initialize",priority:"normal",middleware:t,...r},c=u(s,o);if(c.length>0){if(c.some(e=>n.has(e))){if(!i)throw new Error(`Duplicate middleware name '${h(s,o)}'`);for(const t of c){const r=e.findIndex(e=>e.name===t||e.aliases?.some(e=>e===t));if(-1===r)continue;const n=e[r];if(n.step!==a.step||a.priority!==n.priority)throw new Error(`"${h(n.name,n.aliases)}" middleware with ${n.priority} priority in ${n.step} step cannot be overridden by "${h(s,o)}" middleware with ${a.priority} priority in ${a.step} step.`);e.splice(r,1)}}for(const e of c)n.add(e)}e.push(a)},addRelativeTo:(e,r)=>{const{name:s,override:i,aliases:o}=r,a={middleware:e,...r},c=u(s,o);if(c.length>0){if(c.some(e=>n.has(e))){if(!i)throw new Error(`Duplicate middleware name '${h(s,o)}'`);for(const e of c){const r=t.findIndex(t=>t.name===e||t.aliases?.some(t=>t===e));if(-1===r)continue;const n=t[r];if(n.toMiddleware!==a.toMiddleware||n.relation!==a.relation)throw new Error(`"${h(n.name,n.aliases)}" middleware ${n.relation} "${n.toMiddleware}" middleware cannot be overridden by "${h(s,o)}" middleware ${a.relation} "${a.toMiddleware}" middleware.`);t.splice(r,1)}}for(const e of c)n.add(e)}t.push(a)},clone:()=>s(p()),use:e=>{e.applyToStack(a)},remove:r=>"string"==typeof r?(r=>{let s=!1;const i=e=>{const t=u(e.name,e.aliases);if(t.includes(r)){s=!0;for(const e of t)n.delete(e);return!1}return!0};return e=e.filter(i),t=t.filter(i),s})(r):(r=>{let s=!1;const i=e=>{if(e.middleware===r){s=!0;for(const t of u(e.name,e.aliases))n.delete(t);return!1}return!0};return e=e.filter(i),t=t.filter(i),s})(r),removeByTag:r=>{let s=!1;const i=e=>{const{tags:t,name:i,aliases:o}=e;if(t&&t.includes(r)){const e=u(i,o);for(const t of e)n.delete(t);return s=!0,!1}return!0};return e=e.filter(i),t=t.filter(i),s},concat:e=>{const t=s(p());return t.use(e),t.identifyOnResolve(r||t.identifyOnResolve()||(e.identifyOnResolve?.()??!1)),t},applyToStack:s,identify:()=>o(!0).map(e=>{const t=e.step??e.relation+" "+e.toMiddleware;return h(e.name,e.aliases)+" - "+t}),identifyOnResolve:e=>("boolean"==typeof e&&(r=e),r),resolve:(e,t)=>{for(const r of o().map(e=>e.middleware).reverse())e=r(e,t);return r&&console.log(a.identify()),e}};return a},d={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},m={high:3,normal:2,low:1},f=e=>"function"==typeof e?e():e;function g(e){if("object"==typeof e)return e;e|=0;const t={};let r=0;for(const n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])1==(e>>r++&1)&&(t[n]=1);return t}const y=Symbol.for("@smithy/nor-struct-it");class S{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=S.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(e,t){this.ref=e,this.memberName=t;const r=[];let n=e,s=e;for(this._isMemberSchema=!1;w(n);)r.push(n[1]),n=n[0],s=f(n),this._isMemberSchema=!0;if(r.length>0){this.memberTraits={};for(let e=r.length-1;e>=0;--e){const t=r[e];Object.assign(this.memberTraits,g(t))}}else this.memberTraits=0;if(s instanceof S){const e=this.memberTraits;return Object.assign(this,s),this.memberTraits=Object.assign({},e,s.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,void(this.memberName=t??s.memberName)}if(this.schema=f(s),v(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(s),this.traits=0),this._isMemberSchema&&!t)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){const t=this.prototype.isPrototypeOf(e);return t||"object"!=typeof e||null===e?t:e.symbol===this.symbol}static of(e){const t=f(e);if(t instanceof S)return t;if(w(t)){const[r,n]=t;if(r instanceof S)return Object.assign(r.getMergedTraits(),g(n)),r;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new S(t)}getSchema(){const e=this.schema;return Array.isArray(e)&&0===e[0]?e[4]:e}getName(e=!1){const{name:t}=this;return!e&&t&&t.includes("#")?t.split("#")[1]:t||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){const e=this.getSchema();return"number"==typeof e?e>=64&&e<128:1===e[0]}isMapSchema(){const e=this.getSchema();return"number"==typeof e?e>=128&&e<=255:2===e[0]}isStructSchema(){const e=this.getSchema();if("object"!=typeof e)return!1;const t=e[0];return 3===t||-3===t||4===t}isUnionSchema(){const e=this.getSchema();return"object"==typeof e&&4===e[0]}isBlobSchema(){const e=this.getSchema();return 21===e||42===e}isTimestampSchema(){const e=this.getSchema();return"number"==typeof e&&e>=4&&e<=7}isUnitSchema(){return"unit"===this.getSchema()}isDocumentSchema(){return 15===this.getSchema()}isStringSchema(){return 0===this.getSchema()}isBooleanSchema(){return 2===this.getSchema()}isNumericSchema(){return 1===this.getSchema()}isBigIntegerSchema(){return 17===this.getSchema()}isBigDecimalSchema(){return 19===this.getSchema()}isStreaming(){const{streaming:e}=this.getMergedTraits();return!!e||42===this.getSchema()}isIdempotencyToken(){return!!this.getMergedTraits().idempotencyToken}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return g(this.memberTraits)}getOwnTraits(){return g(this.traits)}getKeySchema(){const[e,t]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!t)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);const r=this.getSchema();return b([e?15:r[4]??0,0],"key")}getValueSchema(){const e=this.getSchema(),[t,r,n]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],s="number"==typeof e?63&e:e&&"object"==typeof e&&(r||n)?e[3+e[0]]:t?15:void 0;if(null!=s)return b([s,0],r?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){const t=this.getSchema();if(this.isStructSchema()&&t[4].includes(e)){const r=t[4].indexOf(e),n=t[5][r];return b(w(n)?n:[n,0],e)}if(this.isDocumentSchema())return b([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){const e={};try{for(const[t,r]of this.structIterator())e[t]=r}catch(e){}return e}getEventStreamMember(){if(this.isStructSchema())for(const[e,t]of this.structIterator())if(t.isStreaming()&&t.isStructSchema())return e;return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");const e=this.getSchema(),t=e[4].length;let r=e[y];if(r&&t===r.length)yield*r;else{r=Array(t);for(let n=0;n<t;++n){const t=e[4][n],s=b([e[5][n],0],t);yield r[n]=[t,s]}e[y]=r}}}function b(e,t){return e instanceof S?Object.assign(e,{memberName:t,_isMemberSchema:!0}):new S(e,t)}const w=e=>Array.isArray(e)&&2===e.length,v=e=>Array.isArray(e)&&e.length>=5,x="***SensitiveInformation***";function E(e,t){if(null==t)return t;const r=S.of(e);if(r.getMergedTraits().sensitive)return x;if(r.isListSchema()){if(r.getValueSchema().getMergedTraits().sensitive)return x}else if(r.isMapSchema()){if(r.getKeySchema().getMergedTraits().sensitive||r.getValueSchema().getMergedTraits().sensitive)return x}else if(r.isStructSchema()&&"object"==typeof t){const e=t,n={};for(const[t,s]of r.structIterator())null!=e[t]&&(n[t]=E(s,e[t]));return n}return t}class ${middlewareStack=p();schema;static classBuilder(){return new O}resolveMiddlewareWithContext(t,r,n,{middlewareFn:s,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:l,additionalContext:u,CommandCtor:h}){for(const e of s.bind(this)(h,t,r,n))this.middlewareStack.use(e);const p=t.concat(this.middlewareStack),{logger:d}=r,m={logger:d,clientName:i,commandName:o,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[e]:{commandInstance:this,...l},...u},{requestHandler:f}=r;return p.resolve(e=>f.handle(e.request,n||{}),m)}}class O{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,t,r={}){return this._smithyContext={service:e,operation:t,...r},this}c(e={}){return this._additionalContext=e,this}n(e,t){return this._clientName=e,this._commandName=t,this}f(e=e=>e,t=e=>e){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=t,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){const e=this;let t;return t=class extends ${input;static getEndpointParameterInstructions(){return e._ep}constructor(...[t]){super(),this.input=t??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(r,n,s){const i=e._operationSchema,o=i?.[4]??i?.input,a=i?.[5]??i?.output;return this.resolveMiddlewareWithContext(r,n,s,{CommandCtor:t,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(i?E.bind(null,o):e=>e),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(i?E.bind(null,a):e=>e),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}}const P={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class I{namespace;schemas;exceptions;static registries=new Map;constructor(e,t=new Map,r=new Map){this.namespace=e,this.schemas=t,this.exceptions=r}static for(e){return I.registries.has(e)||I.registries.set(e,new I(e)),I.registries.get(e)}copyFrom(e){const{schemas:t,exceptions:r}=this;for(const[r,n]of e.schemas)t.has(r)||t.set(r,n);for(const[t,n]of e.exceptions)r.has(t)||r.set(t,n)}register(e,t){const r=this.normalizeShapeId(e);for(const e of[this,I.for(r.split("#")[0])])e.schemas.set(r,t)}getSchema(e){const t=this.normalizeShapeId(e);if(!this.schemas.has(t))throw new Error(`@smithy/core/schema - schema not found for ${t}`);return this.schemas.get(t)}registerError(e,t){const r=e,n=r[1];for(const e of[this,I.for(n)])e.schemas.set(n+"#"+r[2],r),e.exceptions.set(r,t)}getErrorCtor(e){const t=e;return this.exceptions.has(t)?this.exceptions.get(t):I.for(t[1]).exceptions.get(t)}getBaseException(){for(const e of this.exceptions.keys())if(Array.isArray(e)){const[,t,r]=e,n=t+"#"+r;if(n.startsWith("smithy.ts.sdk.synthetic.")&&n.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}}class A extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;const t=e;return A.prototype.isPrototypeOf(t)||Boolean(t.$fault)&&Boolean(t.$metadata)&&("client"===t.$fault||"server"===t.$fault)}static[Symbol.hasInstance](e){if(!e)return!1;const t=e;return this===A?A.isInstance(e):!!A.isInstance(e)&&(t.name&&this.name?this.prototype.isPrototypeOf(e)||t.name===this.name:this.prototype.isPrototypeOf(e))}}class T extends A{constructor(e){super(e),Object.setPrototypeOf(this,T.prototype)}}class C extends T{name="LexiconNotFoundException";$fault="client";constructor(e){super({name:"LexiconNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,C.prototype)}}class L extends T{name="ServiceFailureException";$fault="server";constructor(e){super({name:"ServiceFailureException",$fault:"server",...e}),Object.setPrototypeOf(this,L.prototype)}}class N extends T{name="InvalidNextTokenException";$fault="client";constructor(e){super({name:"InvalidNextTokenException",$fault:"client",...e}),Object.setPrototypeOf(this,N.prototype)}}class _ extends T{name="EngineNotSupportedException";$fault="client";constructor(e){super({name:"EngineNotSupportedException",$fault:"client",...e}),Object.setPrototypeOf(this,_.prototype)}}class k extends T{name="InvalidTaskIdException";$fault="client";constructor(e){super({name:"InvalidTaskIdException",$fault:"client",...e}),Object.setPrototypeOf(this,k.prototype)}}class M extends T{name="SynthesisTaskNotFoundException";$fault="client";constructor(e){super({name:"SynthesisTaskNotFoundException",$fault:"client",...e}),Object.setPrototypeOf(this,M.prototype)}}class j extends T{name="InvalidLexiconException";$fault="client";constructor(e){super({name:"InvalidLexiconException",$fault:"client",...e}),Object.setPrototypeOf(this,j.prototype)}}class R extends T{name="InvalidS3BucketException";$fault="client";constructor(e){super({name:"InvalidS3BucketException",$fault:"client",...e}),Object.setPrototypeOf(this,R.prototype)}}class D extends T{name="InvalidS3KeyException";$fault="client";constructor(e){super({name:"InvalidS3KeyException",$fault:"client",...e}),Object.setPrototypeOf(this,D.prototype)}}class z extends T{name="InvalidSampleRateException";$fault="client";constructor(e){super({name:"InvalidSampleRateException",$fault:"client",...e}),Object.setPrototypeOf(this,z.prototype)}}class F extends T{name="InvalidSnsTopicArnException";$fault="client";constructor(e){super({name:"InvalidSnsTopicArnException",$fault:"client",...e}),Object.setPrototypeOf(this,F.prototype)}}class U extends T{name="InvalidSsmlException";$fault="client";constructor(e){super({name:"InvalidSsmlException",$fault:"client",...e}),Object.setPrototypeOf(this,U.prototype)}}class q extends T{name="LanguageNotSupportedException";$fault="client";constructor(e){super({name:"LanguageNotSupportedException",$fault:"client",...e}),Object.setPrototypeOf(this,q.prototype)}}class B extends T{name="LexiconSizeExceededException";$fault="client";constructor(e){super({name:"LexiconSizeExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,B.prototype)}}class H extends T{name="MarksNotSupportedForFormatException";$fault="client";constructor(e){super({name:"MarksNotSupportedForFormatException",$fault:"client",...e}),Object.setPrototypeOf(this,H.prototype)}}class K extends T{name="MaxLexemeLengthExceededException";$fault="client";constructor(e){super({name:"MaxLexemeLengthExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,K.prototype)}}class V extends T{name="MaxLexiconsNumberExceededException";$fault="client";constructor(e){super({name:"MaxLexiconsNumberExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,V.prototype)}}class W extends T{name="UnsupportedPlsAlphabetException";$fault="client";constructor(e){super({name:"UnsupportedPlsAlphabetException",$fault:"client",...e}),Object.setPrototypeOf(this,W.prototype)}}class X extends T{name="UnsupportedPlsLanguageException";$fault="client";constructor(e){super({name:"UnsupportedPlsLanguageException",$fault:"client",...e}),Object.setPrototypeOf(this,X.prototype)}}class G extends T{name="SsmlMarksNotSupportedForTextTypeException";$fault="client";constructor(e){super({name:"SsmlMarksNotSupportedForTextTypeException",$fault:"client",...e}),Object.setPrototypeOf(this,G.prototype)}}class Y extends T{name="TextLengthExceededException";$fault="client";constructor(e){super({name:"TextLengthExceededException",$fault:"client",...e}),Object.setPrototypeOf(this,Y.prototype)}}const J="AudioStream",Z="client",Q="error",ee="http",te="httpError",re="httpHeader",ne="message",se="streaming",ie="smithy.ts.sdk.synthetic.com.amazonaws.polly",oe="com.amazonaws.polly";var ae=[0,oe,J,{[se]:1},42],ce=[-3,oe,"EngineNotSupportedException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError(ce,_);var le=[-3,oe,"InvalidLexiconException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError(le,j);var ue=[-3,oe,"InvalidNextTokenException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError(ue,N);var he=[-3,oe,"InvalidS3BucketException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError(he,R);var pe=[-3,oe,"InvalidS3KeyException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError(pe,D);var de=[-3,oe,"InvalidSampleRateException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError(de,z);var me=[-3,oe,"InvalidSnsTopicArnException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError(me,F);var fe=[-3,oe,"InvalidSsmlException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError(fe,U);var ge=[-3,oe,"InvalidTaskIdException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError(ge,k);var ye=[-3,oe,"LanguageNotSupportedException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError(ye,q);var Se=[-3,oe,"LexiconNotFoundException",{[Q]:Z,[te]:404},[ne],[0]];I.for(oe).registerError(Se,C);var be=[-3,oe,"LexiconSizeExceededException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError(be,B);var we=[-3,oe,"MarksNotSupportedForFormatException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError(we,H);var ve=[-3,oe,"MaxLexemeLengthExceededException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError(ve,K);var xe=[-3,oe,"MaxLexiconsNumberExceededException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError(xe,V);var Ee=[-3,oe,"ServiceFailureException",{[Q]:"server",[te]:500},[ne],[0]];I.for(oe).registerError(Ee,L);var $e=[-3,oe,"SsmlMarksNotSupportedForTextTypeException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError($e,G);var Oe=[-3,oe,"SynthesisTaskNotFoundException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError(Oe,M);var Pe=[3,oe,"SynthesizeSpeechInput",0,["OutputFormat","Text","VoiceId","Engine","LanguageCode","LexiconNames","SampleRate","SpeechMarkTypes","TextType"],[0,0,0,0,0,64,0,64,0],3],Ie=[3,oe,"SynthesizeSpeechOutput",0,[J,"ContentType","RequestCharacters"],[[()=>ae,16],[0,{[re]:"Content-Type"}],[1,{[re]:"x-amzn-RequestCharacters"}]]],Ae=[-3,oe,"TextLengthExceededException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError(Ae,Y);var Te=[-3,oe,"UnsupportedPlsAlphabetException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError(Te,W);var Ce=[-3,oe,"UnsupportedPlsLanguageException",{[Q]:Z,[te]:400},[ne],[0]];I.for(oe).registerError(Ce,X);var Le=[-3,ie,"PollyServiceException",0,[],[]];I.for(ie).registerError(Le,T);var Ne=[9,oe,"SynthesizeSpeech",{[ee]:["POST","/v1/speech",200]},()=>Pe,()=>Ie];class _e extends($.classBuilder().ep(P).m(function(e,t,r,n){return[l(r,e.getEndpointParameterInstructions())]}).s("Parrot_v1","SynthesizeSpeech",{}).n("PollyClient","SynthesizeSpeechCommand").sc(Ne).build()){}const ke=e=>encodeURIComponent(e).replace(/[!'()*]/g,Me),Me=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;class je{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const t=new je({...e,headers:{...e.headers}});var r;return t.query&&(t.query=(r=t.query,Object.keys(r).reduce((e,t)=>{const n=r[t];return{...e,[t]:Array.isArray(n)?[...n]:n}},{}))),t}static isInstance(e){if(!e)return!1;const t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers}clone(){return je.clone(this)}}const Re={},De={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),Re[e]=t,De[t]=e}function ze(e){let t="";for(let r=0;r<e.byteLength;r++)t+=Re[e[r]];return t}const Fe=e=>(new TextEncoder).encode(e),Ue=e=>"string"==typeof e?Fe(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),qe="X-Amz-Date",Be="X-Amz-Signature",He="X-Amz-Security-Token",Ke="authorization",Ve=qe.toLowerCase(),We=[Ke,Ve,"date"],Xe=Be.toLowerCase(),Ge="x-amz-content-sha256",Ye=He.toLowerCase(),Je={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Ze=/^proxy-/,Qe=/^sec-/,et="AWS4-HMAC-SHA256",tt="AWS4-HMAC-SHA256-PAYLOAD",rt="aws4_request",nt={},st=[],it=(e,t,r)=>`${e}/${t}/${r}/${rt}`,ot=(e,t,r)=>{const n=new e(t);return n.update(Ue(r)),n.digest()},at=({headers:e},t,r)=>{const n={};for(const s of Object.keys(e).sort()){if(null==e[s])continue;const i=s.toLowerCase();(i in Je||t?.has(i)||Ze.test(i)||Qe.test(i))&&(!r||r&&!r.has(i))||(n[i]=e[s].trim().replace(/\s+/g," "))}return n},ct=async({headers:e,body:t},r)=>{for(const t of Object.keys(e))if(t.toLowerCase()===Ge)return e[t];if(null==t)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if("string"==typeof t||ArrayBuffer.isView(t)||(n=t,"function"==typeof ArrayBuffer&&n instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(n))){const e=new r;return e.update(Ue(t)),ze(await e.digest())}var n;return"UNSIGNED-PAYLOAD"};class lt{format(e){const t=[];for(const r of Object.keys(e)){const n=Fe(r);t.push(Uint8Array.from([n.byteLength]),n,this.formatHeaderValue(e[r]))}const r=new Uint8Array(t.reduce((e,t)=>e+t.byteLength,0));let n=0;for(const e of t)r.set(e,n),n+=e.byteLength;return r}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":const r=new DataView(new ArrayBuffer(5));return r.setUint8(0,4),r.setInt32(1,e.value,!1),new Uint8Array(r.buffer);case"long":const n=new Uint8Array(9);return n[0]=5,n.set(e.value.bytes,1),n;case"binary":const s=new DataView(new ArrayBuffer(3+e.value.byteLength));s.setUint8(0,6),s.setUint16(1,e.value.byteLength,!1);const i=new Uint8Array(s.buffer);return i.set(e.value,3),i;case"string":const o=Fe(e.value),a=new DataView(new ArrayBuffer(3+o.byteLength));a.setUint8(0,7),a.setUint16(1,o.byteLength,!1);const c=new Uint8Array(a.buffer);return c.set(o,3),c;case"timestamp":const l=new Uint8Array(9);return l[0]=8,l.set(pt.fromNumber(e.value.valueOf()).bytes,1),l;case"uuid":if(!ht.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const u=new Uint8Array(17);return u[0]=9,u.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){const n=e.slice(r,r+2).toLowerCase();if(!(n in De))throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`);t[r/2]=De[n]}return t}(e.value.replace(/\-/g,"")),1),u}}}var ut;!function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(ut||(ut={}));const ht=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;class pt{bytes;constructor(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>0x8000000000000000||e<-0x8000000000000000)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const t=new Uint8Array(8);for(let r=7,n=Math.abs(Math.round(e));r>-1&&n>0;r--,n/=256)t[r]=n;return e<0&&dt(t),new pt(t)}valueOf(){const e=this.bytes.slice(0),t=128&e[0];return t&&dt(e),parseInt(ze(e),16)*(t?-1:1)}toString(){return String(this.valueOf())}}function dt(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,0===e[t]);t--);}const mt=e=>{e=je.clone(e);for(const t of Object.keys(e.headers))We.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},ft=e=>{if("function"==typeof e)return e;const t=Promise.resolve(e);return()=>t};class gt{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:t,region:r,service:n,sha256:s,uriEscapePath:i=!0}){this.service=n,this.sha256=s,this.uriEscapePath=i,this.applyChecksum="boolean"!=typeof e||e,this.regionProvider=ft(r),this.credentialProvider=ft(t)}createCanonicalRequest(e,t,r){const n=Object.keys(t).sort();return`${e.method}\n${this.getCanonicalPath(e)}\n${(({query:e={}})=>{const t=[],r={};for(const n of Object.keys(e)){if(n.toLowerCase()===Xe)continue;const s=ke(n);t.push(s);const i=e[n];"string"==typeof i?r[s]=`${s}=${ke(i)}`:Array.isArray(i)&&(r[s]=i.slice(0).reduce((e,t)=>e.concat([`${s}=${ke(t)}`]),[]).sort().join("&"))}return t.sort().map(e=>r[e]).filter(e=>e).join("&")})(e)}\n${n.map(e=>`${e}:${t[e]}`).join("\n")}\n\n${n.join(";")}\n${r}`}async createStringToSign(e,t,r,n){const s=new this.sha256;return s.update(Ue(r)),`${n}\n${e}\n${t}\n${ze(await s.digest())}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const t=[];for(const r of e.split("/"))0!==r?.length&&"."!==r&&(".."===r?t.pop():t.push(r));const r=`${e?.startsWith("/")?"/":""}${t.join("/")}${t.length>0&&e?.endsWith("/")?"/":""}`;return ke(r).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if("object"!=typeof e||"string"!=typeof e.accessKeyId||"string"!=typeof e.secretAccessKey)throw new Error("Resolved credential object is not valid")}formatDate(e){const t=(r=e,(e=>"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e)(r).toISOString().replace(/\.\d{3}Z$/,"Z")).replace(/[\-:]/g,"");var r;return{longDate:t,shortDate:t.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}}class yt extends gt{headerFormatter=new lt;constructor({applyChecksum:e,credentials:t,region:r,service:n,sha256:s,uriEscapePath:i=!0}){super({applyChecksum:e,credentials:t,region:r,service:n,sha256:s,uriEscapePath:i})}async presign(e,t={}){const{signingDate:r=new Date,expiresIn:n=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:o,hoistableHeaders:a,signingRegion:c,signingService:l}=t,u=await this.credentialProvider();this.validateResolvedCredentials(u);const h=c??await this.regionProvider(),{longDate:p,shortDate:d}=this.formatDate(r);if(n>604800)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const m=it(d,h,l??this.service),f=((e,t={})=>{const{headers:r,query:n={}}=je.clone(e);for(const e of Object.keys(r)){const s=e.toLowerCase();("x-amz-"===s.slice(0,6)&&!t.unhoistableHeaders?.has(s)||t.hoistableHeaders?.has(s))&&(n[e]=r[e],delete r[e])}return{...e,headers:r,query:n}})(mt(e),{unhoistableHeaders:i,hoistableHeaders:a});u.sessionToken&&(f.query[He]=u.sessionToken),f.query["X-Amz-Algorithm"]=et,f.query["X-Amz-Credential"]=`${u.accessKeyId}/${m}`,f.query[qe]=p,f.query["X-Amz-Expires"]=n.toString(10);const g=at(f,s,o);return f.query["X-Amz-SignedHeaders"]=this.getCanonicalHeaderList(g),f.query[Be]=await this.getSignature(p,m,this.getSigningKey(u,h,d,l),this.createCanonicalRequest(f,g,await ct(e,this.sha256))),f}async sign(e,t){return"string"==typeof e?this.signString(e,t):e.headers&&e.payload?this.signEvent(e,t):e.message?this.signMessage(e,t):this.signRequest(e,t)}async signEvent({headers:e,payload:t},{signingDate:r=new Date,priorSignature:n,signingRegion:s,signingService:i}){const o=s??await this.regionProvider(),{shortDate:a,longDate:c}=this.formatDate(r),l=it(a,o,i??this.service),u=await ct({headers:{},body:t},this.sha256),h=new this.sha256;h.update(e);const p=ze(await h.digest()),d=[tt,c,l,n,p,u].join("\n");return this.signString(d,{signingDate:r,signingRegion:o,signingService:i})}async signMessage(e,{signingDate:t=new Date,signingRegion:r,signingService:n}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:t,signingRegion:r,signingService:n,priorSignature:e.priorSignature}).then(t=>({message:e.message,signature:t}))}async signString(e,{signingDate:t=new Date,signingRegion:r,signingService:n}={}){const s=await this.credentialProvider();this.validateResolvedCredentials(s);const i=r??await this.regionProvider(),{shortDate:o}=this.formatDate(t),a=new this.sha256(await this.getSigningKey(s,i,o,n));return a.update(Ue(e)),ze(await a.digest())}async signRequest(e,{signingDate:t=new Date,signableHeaders:r,unsignableHeaders:n,signingRegion:s,signingService:i}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const a=s??await this.regionProvider(),c=mt(e),{longDate:l,shortDate:u}=this.formatDate(t),h=it(u,a,i??this.service);c.headers[Ve]=l,o.sessionToken&&(c.headers[Ye]=o.sessionToken);const p=await ct(c,this.sha256);!((e,t)=>{e=e.toLowerCase();for(const r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1})(Ge,c.headers)&&this.applyChecksum&&(c.headers[Ge]=p);const d=at(c,n,r),m=await this.getSignature(l,h,this.getSigningKey(o,a,u,i),this.createCanonicalRequest(c,d,p));return c.headers[Ke]=`${et} Credential=${o.accessKeyId}/${h}, SignedHeaders=${this.getCanonicalHeaderList(d)}, Signature=${m}`,c}async getSignature(e,t,r,n){const s=await this.createStringToSign(e,t,n,et),i=new this.sha256(await r);return i.update(Ue(s)),ze(await i.digest())}getSigningKey(e,t,r,n){return(async(e,t,r,n,s)=>{const i=`${r}:${n}:${s}:${ze(await ot(e,t.secretAccessKey,t.accessKeyId))}:${t.sessionToken}`;if(i in nt)return nt[i];for(st.push(i);st.length>50;)delete nt[st.shift()];let o=`AWS4${t.secretAccessKey}`;for(const t of[r,n,s,rt])o=await ot(e,o,t);return nt[i]=o})(this.sha256,e,r,t,n||this.service)}}const St=async e=>{const t=new _e(e.params),r=e.options||{};return await(async(e,t,r={})=>{const{credentials:n}=e.config,s=new yt({service:r.service||"polly",uriEscapePath:r.uriEscapePath||!1,...e.config,credentials:n});let i;e.middlewareStack.addRelativeTo((e,t)=>async e=>{const{request:n}=e;if(!je.isInstance(n))throw new Error("Request to be presigned is not an valid HTTP request.");n.method="GET",delete n.headers["amz-sdk-invocation-id"],delete n.headers["amz-sdk-request"],delete n.headers["content-length"],n.body="",n.query={...n.query,...e.input};const i=new Set;return i.add("content-type"),{response:{},output:{$metadata:{httpStatusCode:200},presigned:await s.presign(n,{expiresIn:3600,unsignableHeaders:i,...r,signingRegion:r.signingRegion??t.signing_region,signingService:r.signingService??t.signing_service})}}},{name:"presignInterceptMiddleware",relation:"before",toMiddleware:"awsAuthMiddleware",override:!0});try{i=(await e.send(t)).presigned}finally{e.middlewareStack.remove("presignInterceptMiddleware")}return function(e){const{port:t,query:r}=e;let{protocol:n,path:s,hostname:i}=e;n&&":"!==n.slice(-1)&&(n+=":"),t&&(i+=`:${t}`),s&&"/"!==s.charAt(0)&&(s=`/${s}`);let o=r?function(e){const t=[];for(let r of Object.keys(e).sort()){const n=e[r];if(r=ke(r),Array.isArray(n))for(let e=0,s=n.length;e<s;e++)t.push(`${r}=${ke(n[e])}`);else{let e=r;(n||"string"==typeof n)&&(e+=`=${ke(n)}`),t.push(e)}}return t.join("&")}(r):"";o&&"?"!==o[0]&&(o=`?${o}`);let a="";null==e.username&&null==e.password||(a=`${e.username??""}:${e.password??""}@`);let c="";return e.fragment&&(c=`#${e.fragment}`),`${n}//${a}${i}${s}${o}${c}`}(i)})(e.client,t,r)};export{St as getSynthesizeSpeechUrl};