var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};function r(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function u(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,u)}s((r=r.apply(e,t||[])).next())})}function i(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(s){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&u[0]?r.return:u[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,u[1])).done)return i;switch(r=0,i&&(u=[2&u[0],i.value]),u[0]){case 0:case 1:i=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,r=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!i||u[1]>i[0]&&u[1]<i[3])){o.label=u[1];break}if(6===u[0]&&o.label<i[1]){o.label=i[1],i=u;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(u);break}i[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],r=0}finally{n=i=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,s])}}}function o(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function a(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function u(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var s={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},c={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};var l,f,d,p,v,h,g,y,m,S,w,b,x,E,L,O,T,C,A,k,j,q,z,I,N,P,M,R,D,$,F,H,_,U,K,X,G,J,V,B,W,Z,Y,Q,ee,te,ne,re,ie,oe=function(){var e=[],t=[],r=new Set,i=function(r){return e.forEach(function(e){r.add(e.middleware,n({},e))}),t.forEach(function(e){r.addRelativeTo(e.middleware,n({},e))}),r},s=function(e){var t=[];return e.before.forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,u([],a(s(e))))}),t.push(e),e.after.reverse().forEach(function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,u([],a(s(e))))}),t},c={add:function(t,i){void 0===i&&(i={});var o=i.name,a=i.override,u=n({step:"initialize",priority:"normal",middleware:t},i);if(o){if(r.has(o)){if(!a)throw new Error("Duplicate middleware name '"+o+"'");var s=e.findIndex(function(e){return e.name===o}),c=e[s];if(c.step!==u.step||c.priority!==u.priority)throw new Error('"'+o+'" middleware with '+c.priority+" priority in "+c.step+" step cannot be overridden by same-name middleware with "+u.priority+" priority in "+u.step+" step.");e.splice(s,1)}r.add(o)}e.push(u)},addRelativeTo:function(e,i){var o=i.name,a=i.override,u=n({middleware:e},i);if(o){if(r.has(o)){if(!a)throw new Error("Duplicate middleware name '"+o+"'");var s=t.findIndex(function(e){return e.name===o}),c=t[s];if(c.toMiddleware!==u.toMiddleware||c.relation!==u.relation)throw new Error('"'+o+'" middleware '+c.relation+' "'+c.toMiddleware+'" middleware cannot be overridden by same-name middleware '+u.relation+' "'+u.toMiddleware+'" middleware.');t.splice(s,1)}r.add(o)}t.push(u)},clone:function(){return i(oe())},use:function(e){e.applyToStack(c)},remove:function(n){return"string"==typeof n?function(n){var i=!1,o=function(e){return!e.name||e.name!==n||(i=!0,r.delete(n),!1)};return e=e.filter(o),t=t.filter(o),i}(n):function(n){var i=!1,o=function(e){return e.middleware!==n||(i=!0,e.name&&r.delete(e.name),!1)};return e=e.filter(o),t=t.filter(o),i}(n)},removeByTag:function(n){var i=!1,o=function(e){var t=e.tags,o=e.name;return!t||!t.includes(n)||(o&&r.delete(o),i=!0,!1)};return e=e.filter(o),t=t.filter(o),i},concat:function(e){var t=i(oe());return t.use(e),t},applyToStack:i,resolve:function(r,i){var c,l;try{for(var f=o(function(){var r,i=[],o=[],c={};return e.forEach(function(e){var t=n(n({},e),{before:[],after:[]});t.name&&(c[t.name]=t),i.push(t)}),t.forEach(function(e){var t=n(n({},e),{before:[],after:[]});t.name&&(c[t.name]=t),o.push(t)}),o.forEach(function(e){if(e.toMiddleware){var t=c[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}}),(r=i,r.sort(function(e,t){return ae[t.step]-ae[e.step]||ue[t.priority||"normal"]-ue[e.priority||"normal"]})).map(s).reduce(function(e,t){return e.push.apply(e,u([],a(t))),e},[]).map(function(e){return e.middleware})}().reverse()),d=f.next();!d.done;d=f.next())r=(0,d.value)(r,i)}catch(e){c={error:e}}finally{try{d&&!d.done&&(l=f.return)&&l.call(f)}finally{if(c)throw c.error}}return r}};return c},ae={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},ue={high:3,normal:2,low:1},se=(function(){function e(e){this.middlewareStack=oe(),this.config=e}e.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,i="function"==typeof t?t:n,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!i)return o(e).then(function(e){return e.output});o(e).then(function(e){return i(null,e.output)},function(e){return i(e)}).catch(function(){})},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}(),function(){this.middlewareStack=oe()}),ce="***SensitiveInformation***",le=(Math.ceil(Math.pow(2,127)*(2-Math.pow(2,-23))),function(e){if(null!=e){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError("Expected integer, got "+typeof e)}}),fe=function(e,t){var n=le(e);if(void 0!==n&&de(n,t)!==n)throw new TypeError("Expected "+t+"-bit integer, got "+e);return n},de=function(e,t){switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},pe=function(e){if(null!=e){if("string"==typeof e)return e;throw new TypeError("Expected string, got "+typeof e)}},ve=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,he=function(){var e=Object.getPrototypeOf(this).constructor,t=new(Function.bind.apply(String,u([null],a(arguments))));return Object.setPrototypeOf(t,e.prototype),t};he.prototype=Object.create(String.prototype,{constructor:{value:he,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(he,String),function(e){function n(){return null!==e&&e.apply(this,arguments)||this}t(n,e),n.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},n.prototype.toJSON=function(){return e.prototype.toString.call(this)},n.fromObject=function(e){return e instanceof n?e:new n(e instanceof String||"string"==typeof e?e:JSON.stringify(e))}}(he),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(l||(l={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(f||(f={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(d||(d={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(p||(p={})),function(e){e.NEURAL="neural",e.STANDARD="standard"}(v||(v={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(h||(h={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(g||(g={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(y||(y={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(m||(m={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(S||(S={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(w||(w={})),function(e){e.filterSensitiveLog=function(e){return n(n({},e),e.Content&&{Content:ce})}}(b||(b={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(x||(x={})),function(e){e.filterSensitiveLog=function(e){return n(n({},e),e.Lexicon&&{Lexicon:b.filterSensitiveLog(e.Lexicon)})}}(E||(E={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(L||(L={})),function(e){e.JSON="json",e.MP3="mp3",e.OGG_VORBIS="ogg_vorbis",e.PCM="pcm"}(O||(O={})),function(e){e.SENTENCE="sentence",e.SSML="ssml",e.VISEME="viseme",e.WORD="word"}(T||(T={})),function(e){e.COMPLETED="completed",e.FAILED="failed",e.IN_PROGRESS="inProgress",e.SCHEDULED="scheduled"}(C||(C={})),function(e){e.SSML="ssml",e.TEXT="text"}(A||(A={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(k||(k={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(j||(j={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(q||(q={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(z||(z={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(I||(I={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(N||(N={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(P||(P={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(M||(M={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(R||(R={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(D||(D={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}($||($={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(F||(F={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(H||(H={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(_||(_={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(U||(U={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(K||(K={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(X||(X={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(G||(G={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(J||(J={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(V||(V={})),function(e){e.filterSensitiveLog=function(e){return n(n({},e),e.Content&&{Content:ce})}}(B||(B={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(W||(W={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(Z||(Z={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(Y||(Y={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(Q||(Q={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(ee||(ee={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(te||(te={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(ne||(ne={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(re||(re={})),function(e){e.filterSensitiveLog=function(e){return n({},e)}}(ie||(ie={}));for(var ge=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,r=new e(n(n({},this),{headers:n({},this.headers)}));return r.query&&(r.query=(t=r.query,Object.keys(t).reduce(function(e,r){var i,o=t[r];return n(n({},e),((i={})[r]=Array.isArray(o)?u([],a(o)):o,i))},{}))),r},e}(),ye=function(e,t){return r(void 0,void 0,void 0,function(){var n,r;return i(this,function(i){return 200!==e.statusCode&&e.statusCode>=300?[2,me(e,t)]:(n={$metadata:je(e),AudioStream:void 0,ContentType:void 0,RequestCharacters:void 0},void 0!==e.headers["content-type"]&&(n.ContentType=e.headers["content-type"]),void 0!==e.headers["x-amzn-requestcharacters"]&&(n.RequestCharacters=function(e){return fe(e,32)}("string"==typeof(o=e.headers["x-amzn-requestcharacters"])?function(e){var t=e.match(ve);if(null===t||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)}(o):o)),r=e.body,n.AudioStream=r,[2,Promise.resolve(n)]);var o})})},me=function(e,t){return r(void 0,void 0,void 0,function(){var r,o,a,u,s,c,l,f,d,p,v,h,g,y,m,S;return i(this,function(i){switch(i.label){case 0:return o=[n({},e)],S={},[4,qe(e.body,t)];case 1:switch(r=n.apply(void 0,o.concat([(S.body=i.sent(),S)])),u="UnknownError",u=ze(e,r.body)){case"EngineNotSupportedException":case"com.amazonaws.polly#EngineNotSupportedException":return[3,2];case"InvalidSampleRateException":case"com.amazonaws.polly#InvalidSampleRateException":return[3,4];case"InvalidSsmlException":case"com.amazonaws.polly#InvalidSsmlException":return[3,6];case"LanguageNotSupportedException":case"com.amazonaws.polly#LanguageNotSupportedException":return[3,8];case"LexiconNotFoundException":case"com.amazonaws.polly#LexiconNotFoundException":return[3,10];case"MarksNotSupportedForFormatException":case"com.amazonaws.polly#MarksNotSupportedForFormatException":return[3,12];case"ServiceFailureException":case"com.amazonaws.polly#ServiceFailureException":return[3,14];case"SsmlMarksNotSupportedForTextTypeException":case"com.amazonaws.polly#SsmlMarksNotSupportedForTextTypeException":return[3,16];case"TextLengthExceededException":case"com.amazonaws.polly#TextLengthExceededException":return[3,18]}return[3,20];case 2:return s=[{}],[4,Se(r,t)];case 3:return a=n.apply(void 0,[n.apply(void 0,s.concat([i.sent()])),{name:u,$metadata:je(e)}]),[3,21];case 4:return c=[{}],[4,we(r,t)];case 5:return a=n.apply(void 0,[n.apply(void 0,c.concat([i.sent()])),{name:u,$metadata:je(e)}]),[3,21];case 6:return l=[{}],[4,be(r,t)];case 7:return a=n.apply(void 0,[n.apply(void 0,l.concat([i.sent()])),{name:u,$metadata:je(e)}]),[3,21];case 8:return f=[{}],[4,xe(r,t)];case 9:return a=n.apply(void 0,[n.apply(void 0,f.concat([i.sent()])),{name:u,$metadata:je(e)}]),[3,21];case 10:return d=[{}],[4,Ee(r,t)];case 11:return a=n.apply(void 0,[n.apply(void 0,d.concat([i.sent()])),{name:u,$metadata:je(e)}]),[3,21];case 12:return p=[{}],[4,Le(r,t)];case 13:return a=n.apply(void 0,[n.apply(void 0,p.concat([i.sent()])),{name:u,$metadata:je(e)}]),[3,21];case 14:return v=[{}],[4,Oe(r,t)];case 15:return a=n.apply(void 0,[n.apply(void 0,v.concat([i.sent()])),{name:u,$metadata:je(e)}]),[3,21];case 16:return h=[{}],[4,Te(r,t)];case 17:return a=n.apply(void 0,[n.apply(void 0,h.concat([i.sent()])),{name:u,$metadata:je(e)}]),[3,21];case 18:return g=[{}],[4,Ce(r,t)];case 19:return a=n.apply(void 0,[n.apply(void 0,g.concat([i.sent()])),{name:u,$metadata:je(e)}]),[3,21];case 20:y=r.body,u=y.code||y.Code||u,a=n(n({},y),{name:""+u,message:y.message||y.Message||u,$fault:"client",$metadata:je(e)}),i.label=21;case 21:return m=a.message||a.Message||u,a.message=m,delete a.Message,[2,Promise.reject(Object.assign(new Error(m),a))]}})})},Se=function(e,t){return r(void 0,void 0,void 0,function(){var t,n;return i(this,function(r){return t={name:"EngineNotSupportedException",$fault:"client",$metadata:je(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=pe(n.message)),[2,t]})})},we=function(e,t){return r(void 0,void 0,void 0,function(){var t,n;return i(this,function(r){return t={name:"InvalidSampleRateException",$fault:"client",$metadata:je(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=pe(n.message)),[2,t]})})},be=function(e,t){return r(void 0,void 0,void 0,function(){var t,n;return i(this,function(r){return t={name:"InvalidSsmlException",$fault:"client",$metadata:je(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=pe(n.message)),[2,t]})})},xe=function(e,t){return r(void 0,void 0,void 0,function(){var t,n;return i(this,function(r){return t={name:"LanguageNotSupportedException",$fault:"client",$metadata:je(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=pe(n.message)),[2,t]})})},Ee=function(e,t){return r(void 0,void 0,void 0,function(){var t,n;return i(this,function(r){return t={name:"LexiconNotFoundException",$fault:"client",$metadata:je(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=pe(n.message)),[2,t]})})},Le=function(e,t){return r(void 0,void 0,void 0,function(){var t,n;return i(this,function(r){return t={name:"MarksNotSupportedForFormatException",$fault:"client",$metadata:je(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=pe(n.message)),[2,t]})})},Oe=function(e,t){return r(void 0,void 0,void 0,function(){var t,n;return i(this,function(r){return t={name:"ServiceFailureException",$fault:"server",$metadata:je(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=pe(n.message)),[2,t]})})},Te=function(e,t){return r(void 0,void 0,void 0,function(){var t,n;return i(this,function(r){return t={name:"SsmlMarksNotSupportedForTextTypeException",$fault:"client",$metadata:je(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=pe(n.message)),[2,t]})})},Ce=function(e,t){return r(void 0,void 0,void 0,function(){var t,n;return i(this,function(r){return t={name:"TextLengthExceededException",$fault:"client",$metadata:je(e),message:void 0},void 0!==(n=e.body).message&&null!==n.message&&(t.message=pe(n.message)),[2,t]})})},Ae=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},ke=function(e,t){return e.filter(function(e){return null!=e}).map(function(e){return null===e?null:e})},je=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},qe=function(e,t){return function(e,t){return function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)}(e,t).then(function(e){return t.utf8Encoder(e)})}(e,t).then(function(e){return e.length?JSON.parse(e):{}})},ze=function(e,t){var n,r=function(e){var t=e;return t.indexOf(":")>=0&&(t=t.split(":")[0]),t.indexOf("#")>=0&&(t=t.split("#")[1]),t},i=(n=e.headers,Object.keys(n).find(function(e){return e.toLowerCase()==="x-amzn-errortype".toLowerCase()}));return void 0!==i?r(e.headers[i]):void 0!==t.code?r(t.code):void 0!==t.__type?r(t.__type):""},Ie=function(e){function o(t){var n=e.call(this)||this;return n.input=t,n}return t(o,e),o.prototype.resolveMiddleware=function(e,t,o){var a,u,l;this.middlewareStack.use((a=t,u=this.serialize,l=this.deserialize,{applyToStack:function(e){e.add(function(e,t){return function(n,o){return function(o){return r(void 0,void 0,void 0,function(){var r,a,u;return i(this,function(i){switch(i.label){case 0:return[4,n(o)];case 1:r=i.sent().response,i.label=2;case 2:return i.trys.push([2,4,,5]),[4,t(r,e)];case 3:return a=i.sent(),[2,{response:r,output:a}];case 4:throw u=i.sent(),Object.assign(u,{$response:r});case 5:return[2]}})})}}}(a,l),s),e.add(function(e,t){return function(o,a){return function(a){return r(void 0,void 0,void 0,function(){var r;return i(this,function(i){switch(i.label){case 0:return[4,t(a.input,e)];case 1:return r=i.sent(),[2,o(n(n({},a),{request:r}))]}})})}}}(a,u),c)}}));var f=e.concat(this.middlewareStack),d={logger:t.logger,clientName:"PollyClient",commandName:"SynthesizeSpeechCommand",inputFilterSensitiveLog:re.filterSensitiveLog,outputFilterSensitiveLog:ie.filterSensitiveLog},p=t.requestHandler;return f.resolve(function(e){return p.handle(e.request,o||{})},d)},o.prototype.serialize=function(e,t){return function(e,t){return r(void 0,void 0,void 0,function(){var r,o,a,u,s,c,l,f,d;return i(this,function(i){switch(i.label){case 0:return[4,t.endpoint()];case 1:return r=i.sent(),o=r.hostname,a=r.protocol,u=void 0===a?"https":a,s=r.port,c=r.path,l={"content-type":"application/json"},f=((null==c?void 0:c.endsWith("/"))?c.slice(0,-1):c||"")+"/v1/speech",d=JSON.stringify(n(n(n(n(n(n(n(n(n({},void 0!==e.Engine&&null!==e.Engine&&{Engine:e.Engine}),void 0!==e.LanguageCode&&null!==e.LanguageCode&&{LanguageCode:e.LanguageCode}),void 0!==e.LexiconNames&&null!==e.LexiconNames&&{LexiconNames:Ae(e.LexiconNames)}),void 0!==e.OutputFormat&&null!==e.OutputFormat&&{OutputFormat:e.OutputFormat}),void 0!==e.SampleRate&&null!==e.SampleRate&&{SampleRate:e.SampleRate}),void 0!==e.SpeechMarkTypes&&null!==e.SpeechMarkTypes&&{SpeechMarkTypes:ke(e.SpeechMarkTypes)}),void 0!==e.Text&&null!==e.Text&&{Text:e.Text}),void 0!==e.TextType&&null!==e.TextType&&{TextType:e.TextType}),void 0!==e.VoiceId&&null!==e.VoiceId&&{VoiceId:e.VoiceId})),[2,new ge({protocol:u,hostname:o,port:s,method:"POST",headers:l,path:f,body:d})]}})})}(e,t)},o.prototype.deserialize=function(e,t){return ye(e,t)},o}(se),Ne={},Pe={},Me=0;Me<256;Me++){var Re=Me.toString(16).toLowerCase();1===Re.length&&(Re="0"+Re),Ne[Me]=Re,Pe[Re]=Me}function De(e){for(var t="",n=0;n<e.byteLength;n++)t+=Ne[e[n]];return t}var $e="X-Amz-Date",Fe="X-Amz-Signature",He="X-Amz-Security-Token",_e="authorization",Ue=$e.toLowerCase(),Ke=[_e,Ue,"date"],Xe=Fe.toLowerCase(),Ge="x-amz-content-sha256",Je=He.toLowerCase(),Ve={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Be=/^proxy-/,We=/^sec-/,Ze="AWS4-HMAC-SHA256",Ye="AWS4-HMAC-SHA256-PAYLOAD",Qe="aws4_request",et={},tt=[],nt=function(e,t,n){return e+"/"+t+"/"+n+"/"+Qe},rt=function(e,t,n){var r=new e(t);return r.update(n),r.digest()},it=function(e,t,n){var r,i,a=e.headers,u={};try{for(var s=o(Object.keys(a).sort()),c=s.next();!c.done;c=s.next()){var l=c.value,f=l.toLowerCase();(f in Ve||(null==t?void 0:t.has(f))||Be.test(f)||We.test(f))&&(!n||n&&!n.has(f))||(u[f]=a[l].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return u},ot=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,at)},at=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()},ut=function(e,t){var n=e.headers,a=e.body;return r(void 0,void 0,void 0,function(){var e,r,u,s,c,l,f;return i(this,function(i){switch(i.label){case 0:try{for(e=o(Object.keys(n)),r=e.next();!r.done;r=e.next())if((u=r.value).toLowerCase()===Ge)return[2,n[u]]}catch(e){l={error:e}}finally{try{r&&!r.done&&(f=e.return)&&f.call(e)}finally{if(l)throw l.error}}return null!=a?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof a||ArrayBuffer.isView(a)||(d=a,"function"==typeof ArrayBuffer&&d instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(d))?((s=new t).update(a),c=De,[4,s.digest()]):[3,3];case 2:return[2,c.apply(void 0,[i.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}var d})})},st=function(e){var t=e.headers,r=e.query,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["headers","query"]);return n(n({},i),{headers:n({},t),query:r?ct(r):void 0})},ct=function(e){return Object.keys(e).reduce(function(t,r){var i,o=e[r];return n(n({},t),((i={})[r]=Array.isArray(o)?u([],a(o)):o,i))},{})},lt=function(e){var t,n;e="function"==typeof e.clone?e.clone():st(e);try{for(var r=o(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var a=i.value;Ke.indexOf(a.toLowerCase())>-1&&delete e.headers[a]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e},ft=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,a=e.uriEscapePath,u=void 0===a||a;this.service=i,this.sha256=o,this.uriEscapePath=u,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}(r),this.credentialProvider=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e}(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),r(this,void 0,void 0,function(){var r,a,u,s,c,l,f,d,p,v,h,g,y,m,S,w,b,x,E,L,O,T,C,A;return i(this,function(i){switch(i.label){case 0:return r=t.signingDate,a=void 0===r?new Date:r,u=t.expiresIn,s=void 0===u?3600:u,c=t.unsignableHeaders,l=t.unhoistableHeaders,f=t.signableHeaders,d=t.signingRegion,p=t.signingService,[4,this.credentialProvider()];case 1:return v=i.sent(),null==d?[3,2]:(g=d,[3,4]);case 2:return[4,this.regionProvider()];case 3:g=i.sent(),i.label=4;case 4:return h=g,y=dt(a),m=y.longDate,S=y.shortDate,s>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(w=nt(S,h,null!=p?p:this.service),b=function(e,t){var r,i,a;void 0===t&&(t={});var u="function"==typeof e.clone?e.clone():st(e),s=u.headers,c=u.query,l=void 0===c?{}:c;try{for(var f=o(Object.keys(s)),d=f.next();!d.done;d=f.next()){var p=d.value,v=p.toLowerCase();"x-amz-"!==v.substr(0,6)||(null===(a=t.unhoistableHeaders)||void 0===a?void 0:a.has(v))||(l[p]=s[p],delete s[p])}}catch(e){r={error:e}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return n(n({},e),{headers:s,query:l})}(lt(e),{unhoistableHeaders:l}),v.sessionToken&&(b.query[He]=v.sessionToken),b.query["X-Amz-Algorithm"]=Ze,b.query["X-Amz-Credential"]=v.accessKeyId+"/"+w,b.query[$e]=m,b.query["X-Amz-Expires"]=s.toString(10),x=it(b,c,f),b.query["X-Amz-SignedHeaders"]=pt(x),E=b.query,L=Fe,O=this.getSignature,T=[m,w,this.getSigningKey(v,h,S,p)],C=this.createCanonicalRequest,A=[b,x],[4,ut(e,this.sha256)]);case 5:return[4,O.apply(this,T.concat([C.apply(this,A.concat([i.sent()]))]))];case 6:return E[L]=i.sent(),[2,b]}})})},e.prototype.sign=function(e,t){return r(this,void 0,void 0,function(){return i(this,function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]})})},e.prototype.signEvent=function(e,t){var n=e.headers,o=e.payload,a=t.signingDate,u=void 0===a?new Date:a,s=t.priorSignature,c=t.signingRegion,l=t.signingService;return r(this,void 0,void 0,function(){var e,t,r,a,f,d,p,v,h,g,y;return i(this,function(i){switch(i.label){case 0:return null==c?[3,1]:(t=c,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=i.sent(),i.label=3;case 3:return e=t,r=dt(u),a=r.shortDate,f=r.longDate,d=nt(a,e,null!=l?l:this.service),[4,ut({headers:{},body:o},this.sha256)];case 4:return p=i.sent(),(v=new this.sha256).update(n),g=De,[4,v.digest()];case 5:return h=g.apply(void 0,[i.sent()]),y=[Ye,f,d,s,h,p].join("\n"),[2,this.signString(y,{signingDate:u,signingRegion:e,signingService:l})]}})})},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,o=n.signingDate,a=void 0===o?new Date:o,u=n.signingRegion,s=n.signingService;return r(this,void 0,void 0,function(){var t,n,r,o,c,l,f,d;return i(this,function(i){switch(i.label){case 0:return[4,this.credentialProvider()];case 1:return t=i.sent(),null==u?[3,2]:(r=u,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=i.sent(),i.label=4;case 4:return n=r,o=dt(a).shortDate,f=(l=this.sha256).bind,[4,this.getSigningKey(t,n,o,s)];case 5:return(c=new(f.apply(l,[void 0,i.sent()]))).update(e),d=De,[4,c.digest()];case 6:return[2,d.apply(void 0,[i.sent()])]}})})},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,a=n.signingDate,u=void 0===a?new Date:a,s=n.signableHeaders,c=n.unsignableHeaders,l=n.signingRegion,f=n.signingService;return r(this,void 0,void 0,function(){var t,n,r,a,d,p,v,h,g,y,m;return i(this,function(i){switch(i.label){case 0:return[4,this.credentialProvider()];case 1:return t=i.sent(),null==l?[3,2]:(r=l,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=i.sent(),i.label=4;case 4:return n=r,a=lt(e),d=dt(u),p=d.longDate,v=d.shortDate,h=nt(v,n,null!=f?f:this.service),a.headers[Ue]=p,t.sessionToken&&(a.headers[Je]=t.sessionToken),[4,ut(a,this.sha256)];case 5:return g=i.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=o(Object.keys(t)),a=i.next();!a.done;a=i.next())if(e===a.value.toLowerCase())return!0}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}(Ge,a.headers)&&this.applyChecksum&&(a.headers[Ge]=g),y=it(a,c,s),[4,this.getSignature(p,h,this.getSigningKey(t,n,v,f),this.createCanonicalRequest(a,y,g))];case 6:return m=i.sent(),a.headers[_e]=Ze+" Credential="+t.accessKeyId+"/"+h+", SignedHeaders="+pt(y)+", Signature="+m,[2,a]}})})},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,r=e.query,i=void 0===r?{}:r,a=[],u={},s=function(e){if(e.toLowerCase()===Xe)return"continue";a.push(e);var t=i[e];"string"==typeof t?u[e]=ot(e)+"="+ot(t):Array.isArray(t)&&(u[e]=t.slice(0).sort().reduce(function(t,n){return t.concat([ot(e)+"="+ot(n)])},[]).join("&"))};try{for(var c=o(Object.keys(i).sort()),l=c.next();!l.done;l=c.next())s(l.value)}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return a.map(function(e){return u[e]}).filter(function(e){return e}).join("&")}(e)+"\n"+r.map(function(e){return e+":"+t[e]}).join("\n")+"\n\n"+r.join(";")+"\n"+n},e.prototype.createStringToSign=function(e,t,n){return r(this,void 0,void 0,function(){var r,o;return i(this,function(i){switch(i.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return o=i.sent(),[2,Ze+"\n"+e+"\n"+t+"\n"+De(o)]}})})},e.prototype.getCanonicalPath=function(e){var t=e.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(e,t,n,o){return r(this,void 0,void 0,function(){var r,a,u,s,c;return i(this,function(i){switch(i.label){case 0:return[4,this.createStringToSign(e,t,o)];case 1:return r=i.sent(),s=(u=this.sha256).bind,[4,n];case 2:return(a=new(s.apply(u,[void 0,i.sent()]))).update(r),c=De,[4,a.digest()];case 3:return[2,c.apply(void 0,[i.sent()])]}})})},e.prototype.getSigningKey=function(e,t,n,a){return function(e,t,n,a,u){return r(void 0,void 0,void 0,function(){var r,s,c,l,f,d,p,v,h;return i(this,function(i){switch(i.label){case 0:return[4,rt(e,t.secretAccessKey,t.accessKeyId)];case 1:if(r=i.sent(),(s=n+":"+a+":"+u+":"+De(r)+":"+t.sessionToken)in et)return[2,et[s]];for(tt.push(s);tt.length>50;)delete et[tt.shift()];c="AWS4"+t.secretAccessKey,i.label=2;case 2:i.trys.push([2,7,8,9]),l=o([n,a,u,Qe]),f=l.next(),i.label=3;case 3:return f.done?[3,6]:(d=f.value,[4,rt(e,c,d)]);case 4:c=i.sent(),i.label=5;case 5:return f=l.next(),[3,3];case 6:return[3,9];case 7:return p=i.sent(),v={error:p},[3,9];case 8:try{f&&!f.done&&(h=l.return)&&h.call(l)}finally{if(v)throw v.error}return[7];case 9:return[2,et[s]=c]}})})}(this.sha256,e,n,t,a||this.service)},e}(),dt=function(e){var t,n=(t=e,function(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?Number(e)?new Date(1e3*Number(e)):new Date(e):e}(t).toISOString().replace(/\.\d{3}Z$/,"Z")).replace(/[\-:]/g,"");return{longDate:n,shortDate:n.substr(0,8)}},pt=function(e){return Object.keys(e).sort().join(";")};function vt(e){var t=e.port,n=e.query,r=e.protocol,i=e.path,a=e.hostname;r&&":"!==r.substr(-1)&&(r+=":"),t&&(a+=":"+t),i&&"/"!==i.charAt(0)&&(i="/"+i);var u=n?function(e){var t,n,r=[];try{for(var i=o(Object.keys(e).sort()),a=i.next();!a.done;a=i.next()){var u=a.value,s=e[u];if(u=ot(u),Array.isArray(s))for(var c=0,l=s.length;c<l;c++)r.push(u+"="+ot(s[c]));else{var f=u;(s||"string"==typeof s)&&(f+="="+ot(s)),r.push(f)}}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}(n):"";return u&&"?"!==u[0]&&(u="?"+u),r+"//"+a+i+u}var ht=function(e,t,o){return void 0===o&&(o={}),r(void 0,void 0,void 0,function(){var a,u,s,c;return i(this,function(l){switch(l.label){case 0:a=new ft(n({service:o.service||"polly",uriEscapePath:o.uriEscapePath||!1},e.config)),u=function(e,t){return function(e){return r(void 0,void 0,void 0,function(){var r,u,s,c;return i(this,function(i){switch(i.label){case 0:if(r=e.request,!ge.isInstance(r))throw new Error("Request to be presigned is not an valid HTTP request.");return r.method="GET",delete r.headers["amz-sdk-invocation-id"],delete r.headers["amz-sdk-request"],delete r.headers["content-length"],r.body="",r.query=n(n({},r.query),e.input),(u=new Set).add("content-type"),[4,a.presign(r,n(n({expiresIn:3600,unsignableHeaders:u},o),{signingRegion:null!==(s=o.signingRegion)&&void 0!==s?s:t.signing_region,signingService:null!==(c=o.signingService)&&void 0!==c?c:t.signing_service}))];case 1:return[2,{response:{},output:{$metadata:{httpStatusCode:200},presigned:i.sent()}}]}})})}},e.middlewareStack.addRelativeTo(u,{name:"presignInterceptMiddleware",relation:"before",toMiddleware:"awsAuthMiddleware"}),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,e.send(t)];case 2:return c=l.sent(),s=c.presigned,[3,4];case 3:return e.middlewareStack.remove("presignInterceptMiddleware"),[7];case 4:return[2,vt(s)]}})})},gt=function(e){return r(void 0,void 0,void 0,function(){var t,n;return i(this,function(r){switch(r.label){case 0:return t=new Ie(e.params),n=e.options||{},[4,ht(e.client,t,n)];case 1:return[2,r.sent()]}})})};export{gt as getSynthesizeSpeechUrl};